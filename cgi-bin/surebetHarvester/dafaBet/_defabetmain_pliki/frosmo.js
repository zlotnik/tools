"38d23a29a6b6dc9754aab7a658834a5614008d0d";
(function(){var H=window,x=H.frosmo=H.frosmo||{},a=x.easy=x.easy||{};a.config=a.config||{};!0===a.namespaceLoaded?a.console&&a.console.error("frosmo.easy.js is already loaded. Initialization could be corrupted"):(function(){a.VERSION="8.4.0";a.MINIMUM_RULES_VERSION="3.6";a.getVersion=function(){return a.VERSION+"-"+(a.VERSION_RULES?a.VERSION_RULES:"1.0")};a.versionAtLeast=function(d,c){if(!d||!c)return!1;d=a.utils.map(d.toString().split("."),Number);for(c=a.utils.map(c.toString().split("."),Number);3>
d.length;)d.push(0);for(;3>c.length;)c.push(0);for(var b=!0,f=0;3>f;f++)if(c[f]>d[f]){b=!0;break}else if(c[f]<d[f]){b=!1;break}!b&&(a.DEVEL&&a.console)&&a.console.error("Version mismatch - condition: "+d+", actual: "+c);return b}}(),a.ERROR_UNKNOWN=1,a.ERROR_JSON=1E3,a.ERROR_REFERER=1001,a.ERROR_STORAGE=1002,a.ERROR_INIT=1003,a.ERROR_SEGMENTCHANGE_EVALUATE=1004,a.ERROR_ORIGIN_MISMATCH=1005,a.ERROR_EVALUATOR_EVALUATE=1006,a.ERROR_EVALUATOR_RULE=1007,a.ERROR_VERSION_DIFF=1009,a.ERROR_CUSTOMACTION=1010,
a.ERROR_TEMPLATE_RENDER=1011,a.ERROR_CONVERSION_EVALUATOR_EVALUATE=1012,a.ERROR_EVENT_QUEUE_FULL=1013,a.ERROR_INIT_CONTEXT=1014,a.ERROR_INIT_UID=1015,a.ERROR_LOCATION=1016,a.ERROR_BROWSER_VERSION=1017,a.ERROR_MESSAGE_RESPONSE=1018,a.ERROR_TRIGGER_FN_CALL=1019,a.ERROR_TRIGGER_RULE=1020,a.ERROR_BASE_EVALUATOR_FN_CALL=1021,a.ERROR_CONTEXT_XDMREADY=1022,a.ERROR_DOM_SELECTOR=1023,a.ERROR_CONTEXTAPI=1024,a.ERROR_JQUERY_UI_MISSING=1025,a.ERROR_COOKIE_SIZE=1026,a.ERROR_INIT_QUICK_MESSAGE=1027,a.ERROR_SITE_LOCALE=
20008,a.ERROR_SITE_UNKNOWN=20009,a.ERROR_SITE_USER=20010,a.ERROR_SITE_CONVERSION=20021,a.ERROR_SITE_CONVERSION_TRANS_ID_MISSING=20013,a.ERROR_SITE_CONVERSION_ID=20014,a.ERROR_SITE_CONVERSION_VALUE=20015,a.ERROR_SITE_CONVERSION_QUANTITY=20025,a.ERROR_SITE_DATAWAREHOUSE=20016,a.ERROR_SITE_JQUERY_MISSING=20017,a.ERROR_SITE_CUSTOMACTION=20024,a.ERROR_SITE_CUSTOMACTION_VALUE=20018,a.ERROR_SITE_INIT=20019,a.ERROR_SITE_RENDERER=20023,a.ERROR_SITE_CUSTOM_API=20020,a.ERROR_SITE_PRODUCT=20012,a.ERROR_SITE_PRODUCT_ID=
20026,a.ERROR_SITE_PRODUCT_ATTRIBUTE=20027,a.ERROR_SITE_GENRE=20001,a.ERROR_SITE_CITY=20002,a.ERROR_SITE_RESERVATION=20003,a.ERROR_SITE_PURCHASE=20004,a.ERROR_SITE_PURCHASE_NAME=20005,a.ERROR_SITE_PURCHASE_PRICE=20006,a.ERROR_SITE_PURCHASE_QUANTITY=20007,a.ERROR_PRODUCT_PARSER=a.ERROR_SITE_PRODUCT,a.ERROR_SITE_CONFIG_MISSING=20011,a.ERROR_SITE_TRANS_ID_MISSING=a.ERROR_SITE_CONVERSION_TRANS_ID_MISSING,a.ERROR_COUNTER_DATA_INVALID=40002,a.EVENT_SEGMENT_ENTER="segment.enter",a.EVENT_SEGMENT_LEAVE="segment.leave",
a.EVENT_CUSTOMACTION="customAction",a.EVENT_INIT_START="init.start",a.EVENT_INIT_SUCCESS="init.success",a.EVENT_INIT_FAILURE="init.failure",a.EVENT_INIT_UID="init.uid",a.EVENT_INIT_CONTEXT="init.context",a.EVENT_LOGIN="login",a.EVENT_LOGOUT="logout",a.EVENT_EASY_CONFIG="easy.config",a.EVENT_VISIT="visit",a.EVENT_LOCATION="location",a.EVENT_XDM_REQUEST="xdm.request",a.EVENT_XDM_READY="xdm.ready",a.EVENT_CONVERSION="conversion",a.EVENT_PRODUCT_DATA="product",a.EVENT_DATALAYER="dataLayer",a.EVENT_MESSAGESHOW_COMPLETE=
"messageshow.complete",a.EVENT_MESSAGE_INIT="message.initSuccess",a.EVENT_MESSAGE_REQUEST="message.request",a.EVENT_MESSAGE_RECEIVE="message.receive",a.EVENT_MESSAGE_SUCCESS="message.success",a.EVENT_MESSAGE_FAILURE="message.failure",a.EVENT_MESSAGE_SHOW="message.showMessage",a.EVENT_MESSAGE_TRUE_DISPLAY="message.trueDisplay",a.EVENT_MESSAGE_CLICK="message.clickMessage",a.EVENT_URL_CHANGED="pageload.urlChanged",a.EVENT_TARGETGROUP_ENTER="targetgroup.enter",a.EVENT_TARGETGROUP_LEAVE="targetgroup.leave",
a.EVENT_CAMPAIGN_STAMP="campaign.stamp",a.EVENT_CAMPAIGN_UNSTAMP="campaign.unstamp",a.EVENT_CAMPAIGN_CLICK="campaign.click",a.EVENT_SCRIPT_LOAD="scriptLoad",a.EVENT_DOM_READY="domReady",a.EVENT_DOM_EVENT="domEvent",a.EVENT_TRIGGER_FIRE="trigger.fire",a.EVENT_TRIGGER_EVENT="trigger.event",a.XDM_INIT_TIMEOUT=5E3,a.API_QUEUE_MAX_EVENTS=40,a.DEVEL=!1,a.sharedContextRpc=null,a.COOKIE_QUICK_CONTEXT="frosmo_quickContext",a.COOKIE_MAX_SIZE=3E3,this.JSON||(this.JSON={}),function(){function a(b){return 10>
b?"0"+b:b}function c(a){h.lastIndex=0;return h.test(a)?'"'+a.replace(h,function(a){var b=n[a];return"string"===typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function b(a,d){var f,e,s,k,q=g,y,h=d[a];h&&("object"===typeof h&&"function"===typeof h.toJSON)&&(h=h.toJSON(a));"function"===typeof w&&(h=w.call(d,a,h));switch(typeof h){case "string":return c(h);case "number":return isFinite(h)?String(h):"null";case "boolean":case "null":return String(h);case "object":if(!h)return"null";
g+=l;y=[];if("[object Array]"===Object.prototype.toString.apply(h)){k=h.length;for(f=0;f<k;f+=1)y[f]=b(f,h)||"null";s=0===y.length?"[]":g?"[\n"+g+y.join(",\n"+g)+"\n"+q+"]":"["+y.join(",")+"]";g=q;return s}if(w&&"object"===typeof w){k=w.length;for(f=0;f<k;f+=1)e=w[f],"string"===typeof e&&(s=b(e,h))&&y.push(c(e)+(g?": ":":")+s)}else for(e in h)Object.hasOwnProperty.call(h,e)&&(s=b(e,h))&&y.push(c(e)+(g?": ":":")+s);s=0===y.length?"{}":g?"{\n"+g+y.join(",\n"+g)+"\n"+q+"}":"{"+y.join(",")+"}";g=q;return s}}
"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(b){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()});var f=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h=
/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g,l,n={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},w;"function"!==typeof JSON.stringify&&(JSON.stringify=function(a,c,d){var e;l=g="";if("number"===typeof d)for(e=0;e<d;e+=1)l+=" ";else"string"===typeof d&&(l=d);if((w=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==typeof c.length))throw Error("JSON.stringify");return b("",{"":a})});
"function"!==typeof JSON.parse&&(JSON.parse=function(a,b){function c(a,e){var d,f,g=a[e];if(g&&"object"===typeof g)for(d in g)Object.hasOwnProperty.call(g,d)&&(f=c(g,d),void 0!==f?g[d]=f:delete g[d]);return b.call(a,e,g)}var e;a=String(a);f.lastIndex=0;f.test(a)&&(a=a.replace(f,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return e=eval("("+a+")"),"function"===typeof b?c({"":e},""):e;throw new SyntaxError("JSON.parse");})}(),function(){a.xdmLocal=function(d){var c;d.remote||a.console.error("remote-parameter missing");c=a.utils.parseUri(d.remote);this.init(c.protocol+"://"+c.authority,c.path,d)};a.xdmLocal.prototype={totalCount:0,domains:{},reset:function(){a.xdmLocal.prototype.totalCount=0;a.xdmLocal.prototype.domains={}},log:function(a){},sendMessage:function(a){if(this.remoteIframe)this.remoteIframe.postMessage(x.JSON.stringify(a),
"*");else throw"SendMessage: Ready-message has not been received";},receiveMessage:function(a){var c;if(a.origin.toLowerCase()===this.allowedOrigin.toLowerCase())switch(this.log("local receiveMessage "+x.JSON.stringify(a.origin)+": "+a.data),c=x.JSON.parse(a.data),c.method){case "ready":this.remoteIframe=a.source;if("function"===typeof this.onReady)this.onReady();break;case "get":case "set":(a=this.callbacks.shift())&&a(c.value);break;case "error":if("function"===typeof this.onError)this.onError()}},
set:function(d,c,b){"function"===typeof b&&(b=a.addExceptionHandling(b));this.callbacks.push(b);this.sendMessage({method:"set",name:d,value:c})},get:function(d,c){"function"===typeof c&&(c=a.addExceptionHandling(c));this.callbacks.push(c);this.sendMessage({method:"get",name:d})},createXdmIframe:function(d,c){var b,f=0,h,g=this;b=document.createElement("iframe");b.src=d+c;b.width=0;b.height=0;b.tabIndex=-1;b.id="frosmo-xdm";b.style.display="none";h=function(c){var d=document.getElementsByTagName(c)[0];
if(d){if(d.appendChild(b),"function"===typeof g.onIframeInsert)g.onIframeInsert()}else 100>f++&&a.setTimeout(function(){h(c)},100)};a.config.xdmIframeInHead?h("head"):h("body")},init:function(d,c,b){var f=this;if(this.domains[d])throw"xdmLocal already conntected to '"+d+"'";if(!d||!c)throw"xdmLocal.init(). domain or path missing("+d+","+c+")";this.domains[d]=1;a.xdmLocal.prototype.totalCount+=1;this.index=this.totalCount;this.callbacks=[];this.onReady=b.onReady;this.allowedOrigin=d;this.remoteIframe=
null;this.onIframeInsert=b.onIframeInsert;this.onError=b.onError;f.createXdmIframe(d,c);c=function(a){f.receiveMessage(a)};window.addEventListener?addEventListener("message",c,!1):attachEvent("onmessage",c);this.log("local init: "+d)}}}(),window.frosmo||(window.frosmo={}),x.request=function(){if(x.request)return x.request;var a,c={},b=0,f={},h=function(a){for(var b in a)a.hasOwnProperty(b)&&delete a[b]},g=function(a){window.setTimeout(function(){document.getElementsByTagName("head")[0].appendChild(a)},
10)},l=function(a,b){var c=document.createElement("script");b&&(a=a+(/\?/.exec(a)?"&":"?")+b.join("&").replace(/%20/g,"+"));c.setAttribute("type","text/javascript");c.setAttribute("charset","utf-8");c.setAttribute("src",a);c.setAttribute("async",!0);return c},n=function(a,b,c){f[a]=function(a){};c[a]&&(window.clearTimeout(c[a]),delete c[a]);b&&(b.removeAttribute("src"),b.parentNode&&b.parentNode.removeChild(b))},w=function(a,b,c){return"object"!==typeof a?!1:a.addEventListener?(a.addEventListener(b,
c,!1),!0):a.attachEvent?(a.attachEvent("on"+b,c),!0):!1};a=function(){this.init.apply(this,arguments)};a.prototype={init:function(a,c){this.initialized=!1;this.url=a;this.callback=c;this.callbackId=null;if(a)if(c&&c.on&&c.on.success){this.initialized=!0;c.timeout||(c.timeout=1E4);var d;c&&c.jsonpCallback?d=c.jsonpCallback:(b+=1,d="req"+b);this.callbackId=d}else x.easy.console.error("JSONPRequest.init: Invalid callback-paramter '"+c+'"');else x.easy.console.error("JSONPRequest.init: No request URL defined, aborting request.")},
send:function(){var a=this,b=this.callback,d,e,s=[],k=function(a,b){s[s.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(this.initialized){k("callback","frosmo.request.callbacks."+this.callbackId);if(this.callback.params)for(e in this.callback.params)e&&k(e,this.callback.params[e]);d=l(this.url,s);f[this.callbackId]=function(e){n(a.callbackId,d,c);b.on.success.call(null,e,a)};this.callback.on.timeout&&(c[this.callbackId]=window.setTimeout(function(){n(a.callbackId,d,c);b.on.timeout.call(null,
a)},b.timeout));this.callback.on.failure&&w(d,"error",function(){n(a.callbackId,d,c);b.on.failure.call(null,a)});g(d);return this}x.easy.console.error("JSONPRequest.send: not initialized correctly")}};return{callbacks:f,reset:function(){b=0;h(c);h(f)},create:function(b,c){return new a(b,c)},jsonp:function(b,c){var f=new a(b,c),e=f.callback,s=function(a,b){var c=a[b];c&&(a[b]=c.hasExceptionHandling?c:x.easy.addExceptionHandling(c))};s(e.on,"success");s(e.on,"failure");s(e.on,"timeout");return f.send()}}}(),
function(){(this.frosmo=this.frosmo||{}).JSON=function(){return{stringify:function(a){var c=[Array,Object],b=[void 0,void 0],f;for(f=0;2>f;f+=1)b[f]=c[f].prototype.toJSON,delete c[f].prototype.toJSON;a=JSON.stringify(a);for(f=0;2>f;f+=1)b[f]&&(c[f].prototype.toJSON=b[f]);return a},parse:function(a){return JSON.parse(a)}}}()}(),function(){a.console=function(){var a,c=function(b,c){if(window.console&&x.easy.store&&x.easy.store.get("frosmo_debug")){var h=1===c.length?c[0]:Array.prototype.slice.call(c),
g="EASY "+b+"::",l=new Date;a||(a=l.getTime());g=l.getTime()-a+": "+g;return console[b]?console[b](g,h):console.log(g,h)}};return{debug:function(){c("debug",arguments)},log:function(){c("log",arguments)},error:function(){c("error",arguments)}}}()}(),function(){var d=!1,c=function(){document.addEventListener?(document.removeEventListener("DOMContentLoaded",b,!1),window.removeEventListener("load",b,!1)):(document.detachEvent("onreadystatechange",b),window.detachEvent("onload",b))},b=function(a){if(document.addEventListener||
"load"===a.type||"complete"===document.readyState)c(),f()},f=function(){if(!document.body)return a.setTimeout(f);d=!0;a.utils.isArray(h)&&(a.utils.each(h,function(a){a()}),h=[])},h;a.domEvents=function(){return{listen:function(b,c,d,f,h){var r=!!document.querySelectorAll,u=function(b,c){var k=b||window.event,q=k.target||k.srcElement,y=[];if(d&&r)y=c.querySelectorAll(d),a.utils.each(y,function(a){for(var b=!1,e=q;e&&9!==e.nodeType&&e!==c;){if(a===e){b=!0;break}e=e.parentNode}if(b)return f.call(h,k,
e)});else return f.call(h,k,q)};"function"===typeof d&&(h=f,f=d,d=null);h=h||this;f=a.addExceptionHandling(f);b="string"===typeof b&&r?document.querySelectorAll(b):[b];a.utils.each(b,function(b){b.addEventListener?b.addEventListener(c,a.addExceptionHandling(function(a){u(a,b)}),!1):b.attachEvent&&b.attachEvent("on"+c,a.addExceptionHandling(function(){u(null,b)}))})},fire:function(a,b){var c;if(document.createEvent)return c=document.createEvent("HTMLEvents"),c.initEvent(b,!0,!0),!a.dispatchEvent(c);
if(document.createEventObject)return c=document.createEventObject(),a.fireEvent("on"+b,c)},ready:function(g){g=a.addExceptionHandling(g);if(d)return g();if(h)h.push(g);else if(h=[],h.push(g),"complete"===document.readyState)x.easy.noAsyncApi?f():a.setTimeout(f);else if(document.addEventListener)document.addEventListener("DOMContentLoaded",b,!1),window.addEventListener("load",b,!1);else{document.attachEvent("onreadystatechange",b);window.attachEvent("onload",b);var l=!1;try{l=null==window.frameElement&&
document.documentElement}catch(n){}l&&l.doScroll&&function m(){if(!d){try{l.doScroll("left")}catch(b){return a.setTimeout(m,50)}c();f()}}()}},preventDefault:function(a){a=a||window.event;a.preventDefault?a.preventDefault():a.returnValue=!1},isDefaultPrevented:function(a){return a.defaultPrevented||void 0===a.defaultPrevented&&(!1===a.returnValue||a.getPreventDefault&&a.getPreventDefault())?!0:!1}}}()}(),a.domElements=function(){function d(a,b){var c=document.createElement("script");c.type="text/javascript";
if(b)try{c.appendChild(document.createTextNode(a))}catch(d){c.text=a}else c.src=a;document.body.appendChild(c)}var c={},b=null,f="",h=function(a){if(a=a.getBoundingClientRect?a.getBoundingClientRect():null)return{left:a.left,top:a.top,right:a.right,bottom:a.bottom,width:a.width?a.width:a.right-a.left,height:a.height?a.height:a.bottom-a.top}},g=function(a){f=a;b||(b=document.createElement("style"),b.type="text/css",b.id="f3-style");b.styleSheet?b.styleSheet.cssText=f:b.innerHTML=f;document.getElementById("f3-style")||
document.getElementsByTagName("head")[0].appendChild(b)};c.visibility=function(b){var c=function(a,b){if(window.getComputedStyle)return document.defaultView.getComputedStyle(a,null)[b];if(a.currentStyle)return a.currentStyle[b]};return!function(a){for(var b;a;)b=a.nodeType,a=a.parentNode;return 9===b}(b)||!function(a){for(;a&&9!==a.nodeType;){if("0"===c(a,"opacity")||"none"===c(a,"display")||"hidden"===c(a,"visibility"))return!1;a=a.parentNode}return!0}(b)?0:function(b){var c=h(b),d=[],f,e,s=0,k,
q,y=document.documentElement.clientHeight,g=document.documentElement.clientWidth;if(c&&document.elementFromPoint){if(0>c.bottom||0>c.right||c.top>y||c.left>g||0===c.height||0===c.width)return 0;e=c.height-1;f=c.width-1;for(k=0;10>k;k+=1)for(q=0;10>q;q+=1)d.push({x:c.left+Math.round(k/9*f),y:c.top+Math.round(q/9*e)});a.utils.each(d,function(a,c){if(!(0>a.x||a.x>g||0>a.y||a.y>y))for(var e=document.elementFromPoint(a.x,a.y);e&&e.parentNode&&9!==e.nodeType;)e===b?(s+=1,e=null):e=e.parentNode});return s/
100}}(b)};c.addStyles=function(b){g(a.utils.trim(f+" "+b))};c.removeStyles=function(c){if(b){c=c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/"|'/g,"(\"|')");var d=f,d=d.replace(RegExp("\\s*"+c+"(\\s*)\\{[^\\{\\}]*\\}\\s*","gi"),"\n"),d=d.replace(/\n+/g,"\n");g(a.utils.trim(d))}};c.getStylesElement=function(){return b};c.removeStylesElement=function(){f="";b&&(b.parentNode.removeChild(b),b=null)};c.selector=function(b){if(window.jQuery){var c=[];window.jQuery(b).each(function(a,b){c.push(b)});return c}if(a.sizzle)return a.sizzle(b);
try{return document.querySelectorAll(b)}catch(d){return a.api.error("domElements.selector: Invalid selector:"+b,a.ERROR_DOM_SELECTOR),[]}};c.isValidCssSelector=function(a){try{return document.querySelector(a),!0}catch(b){return!1}};c.waitForElement=function(b){function c(b){var d,f,e=function(c){c=a.domElements.selector(b.selector);0<c.length&&(d.disconnect(),clearTimeout(f),b.success&&"function"===typeof b.success&&b.success(c))};d=new (window.MutationObserver||window.WebKitMutationObserver)(e);
d.observe(document.documentElement,{attributes:!1,characterData:!1,childList:!0,subtree:!0});f=a.setTimeout(function(){d.disconnect();b.failure&&"function"===typeof b.failure&&b.failure()},b.timeout);e()}function d(b){a.utils.waitFor(b.interval,b.timeout,function(){var c=a.domElements.selector(b.selector);if(0<c.length)return b.success&&"function"===typeof b.success&&b.success(c),!0},b.failure)}b.interval=b.interval||100;b.timeout=b.timeout||5E3;window.MutationObserver||window.WebKitMutationObserver?
c(b):d(b)};c.loadPiwik=function(a){if(!a)return!1;window._paq=window._paq||[];window._paq.push(["trackPageView"]);window._paq.push(["enableLinkTracking"]);window._paq.push(["setTrackerUrl","//piwik.inpref.com/piwik.php"]);window._paq.push(["setSiteId",a]);d("//piwik.inpref.com/piwik.js");return!0};c.addScriptTag=d;return c}(),function(){a.store=function(){var a={exists:function(){try{return"undefined"!==typeof window.localStorage&&null!==window.localStorage}catch(a){return!1}},check:function(){try{if(!a.exists())return!1;
a.set("_(test_key)",1);a.remove("_(test_key)");return!0}catch(c){return!1}},set:function(c,b){if(a.exists())try{localStorage.setItem("__frosmoeasy__"+c,x.JSON.stringify({data:b}))}catch(f){throw a.remove("context"),"amplify.store quota exceeded";}},get:function(c,b){if(a.exists()){c="__frosmoeasy__"+c;var f=localStorage.getItem(c);if(f=f?x.JSON.parse(f):null)return f.data;a.remove(c);return b}return null},remove:function(c){a.exists()&&localStorage.removeItem("__frosmoeasy__"+c)}};return a}()}(),
a.utils=function(){var d=function(a,b,c){var e,d;if(!("undefined"===typeof a||null===a))if(Array.prototype.forEach&&a.forEach===Array.prototype.forEach)a.forEach(b,c);else if(a.length===+a.length){e=0;for(d=a.length;e<d;e+=1)"undefined"!==typeof a[e]&&b.call(c,a[e],e,a)}else for(e in a)Object.prototype.hasOwnProperty.call(a,e)&&b.call(c,a[e],e,a)},c=function(a){var b,c=[];for(b in a)a.hasOwnProperty(b)&&c.push(b);return c},b=function(a){return a===Object(a)},f=Array.isArray||function(a){return"[object Array]"===
Object.prototype.toString.call(a)},h=function(a){if(!b(a))return a;if(f(a))return a.slice();if(a instanceof Date)return new Date(a.getTime());var c={},e;for(e in a)a.hasOwnProperty(e)&&(c[e]=h(a[e]));return c},g="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),l=/(?:^|&)([^&=]*)=?([^&]*)/g,n={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,
loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},w=function(a){a&&(a=a.replace(/@/,"%40"));return a},m=function(b){if(null===b||""===b)return{host:"",path:"",queryVariables:{},params:{},anchor:""};b=a.utils.parseUri(b);var c="",e={},f="";try{c=decodeURIComponent(b.path)}catch(s){c=b.path}d(b.queryKey,function(a,b){try{b=decodeURIComponent(b),a=decodeURIComponent(a),
e[b]=a}catch(c){e[b]=a}});if(b.anchor)try{f=decodeURIComponent(b.anchor)}catch(k){f=b.anchor}return{host:b.host,path:c,queryVariables:b.queryKey,params:e,anchor:f}},r=function(a,b){return-1!==u(a,b)},u=function(a,b,c){var e;if("object"===typeof a&&a instanceof Array){e=a.length;for(c=c||0;c<e;c++)if(a[c]===b)return c}return-1},e=function(a){return"string"===typeof a?a.replace(/^\s+|\s+$/g,""):a},s=function(a){return!a||1!==a.nodeType?[]:(a=a.getAttribute("class"))?a.split(" "):[]},k=function(){var b=
a.main.getCurrentBrowserData();if(!b.href)return"";b=m(b.href);return b.host},q=function(a,b){var c=[];d(a,function(a){b(a)&&c.push(a)});return c};return{each:d,extend:function(a){d(Array.prototype.slice.call(arguments,1),function(b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])});return a},isArray:f,clone:h,keys:c,isEmpty:function(a){return 0===(f(a)||"string"===typeof a?a.length:c(a).length)},parseUri:function(a){a=w(a);a=n.loose.exec(a);for(var b={},c=14;0<c-1;)c-=1,b[g[c]]=a[c]||"";b.queryKey=
{};b[g[12]].replace(l,function(a,c,e){c&&(b.queryKey[c]=e)});return b},getLocationFromUrl:m,getDateInContextFormat:function(a){var b=a.getMonth()+1,c=a.getDate();10>c&&(c="0"+c);10>b&&(b="0"+b);return a.getFullYear()+""+b+""+c},getDateFromContextFormat:function(a){var b=parseInt(a.substring(0,4),10),c=parseInt(a.substring(4,6),10)-1;a=parseInt(a.substring(6,8),10);return new Date(b,c,a,0,0,0,0)},inArray:r,subs:function(a,b,c){var e,d;if(b.length!==c.length)throw Error("ERROR: invalidArgument");d=
a;for(e=0;e<b.length;e+=1)a=RegExp(b[e],"g"),d=d.replace(a,c[e]);return d},trim:e,trimInside:function(a){return"string"===typeof a?(a=e(a),a.replace(/\s+/g," ")):a},getClassNames:s,addClassName:function(a,b){var c=s(a),e,d=b.split(" "),f;for(f=0;f<d.length;f+=1)e=d[f],r(c,e)||c.push(e);a.setAttribute("class",c.join(" "))},removeClassName:function(a,b){var c=s(a),e,d=[];for(e=0;e<c.length;e+=1)c[e]!==b&&d.push(c[e]);a.setAttribute("class",d.join(" "))},addStyles:a.domElements.addStyles,isObject:b,
getTargetGroupsFromCookie:function(){var a,b=[];if(a=document.cookie.match(/frosmo_keywords=([^;$]+)/)){a=unescape(a[1]).split(".");for(var c=0;c<a.length;c+=1)0<a[c].length&&b.push(a[c]);return b}return[]},matchStringUrls:function(b,c,e){var d={},f={},s=/^www\./;/^\//.test(c)&&(c=k()+c);d={};f={};c=m(c);a.utils.each(c.queryVariables,function(a,b){f[b]=["matchExact",a]});d&&(d.anchor=c.anchor,d.matcher="matchExact");e=m(e);return c.host.toLowerCase().replace(s,"")===e.host.toLowerCase().replace(s,
"")&&a.evaluator.matchUrl(b,c.path,f,d,e)},isPositiveInteger:function(a){var b=~~Number(a);return String(b)===a&&0<b},getTimestamp:function(a){a=a||new Date;return Math.round(a.getTime()/1E3)},loadPiwik:function(b,c){a.domElements.loadPiwik(c)},waitFor:function(b,c,e,d){var f=(new Date).getTime(),s;s=function(){e()||((new Date).getTime()<f+c?a.setTimeout(s,b):d&&d())};s()},map:function(a,b){var c=[];d(a,function(a){c.push(b(a))});return c},filter:q,reduce:function(a,b,c){var e=c;d(a,function(a){e=
b(e,a)});return e},find:function(a,b){var c=q(a,b);return 0<c.length?c[0]:null},indexOf:u}}(),function(){a.states=function(){var a={},c={};a.set=function(a,d){c[a]=d};a.get=function(a){return c[a]};a.getAll=function(){return c};return a}()}(),a.cookies=function(){function d(d,h,g){if(!c){var l="",n="";d=escape(d);h=escape(h);g&&(l=new Date,l.setTime(l.getTime()+864E5*g),l="; expires="+l.toGMTString());b&&/\.[a-z]+$/.exec(b)&&(n=";domain="+escape(b));document.cookie=d+"="+h+l+n+"; path=/";document.cookie.length>
a.COOKIE_MAX_SIZE&&a.api.error("Cookie size:"+document.cookie.length+" exceeds limit:"+a.COOKIE_MAX_SIZE,a.ERROR_COOKIE_SIZE)}}var c=!1,b;return{get:function(a){a+="=";for(var b=document.cookie.split(";"),c=0;c<b.length;c+=1){for(var d=b[c];" "===d.charAt(0);)d=d.substring(1,d.length);if(0===d.indexOf(a))return unescape(d.substring(a.length,d.length))}return null},set:d,remove:function(a){d(a,"",-1)},setDisabled:function(a){c=Boolean(a)},setCookieDomain:function(a){b=a}}}(),function(){a.evaluator=
function(){var d={},c,b,f,h,g,l,n,w,m,r,u,e,s,k,q,y,z,A={},p,t=function(a){return null===a?null:""===a?"/":"/"!==a?a.replace(/\/$/,""):a},G=function(a,b,c){c&&(a=a.toLowerCase(),b=b.toLowerCase());return b&&0<=b.toLowerCase().indexOf(a.toLowerCase())},v=function(a,b,c){var e="";c&&(e+="i");return RegExp(a,e).test(b)},F={matchExact:function(a,b,c){c&&(a=a.toLowerCase(),b=b.toLowerCase());return a.toLowerCase()===b.toLowerCase()},matchPartial:G,matchBegins:function(a,b,c){c&&(a=a.toLowerCase(),b=b.toLowerCase());
return b&&0===b.toLowerCase().indexOf(a.toLowerCase())},matchRegex:v,matchContains:function(a,b,c){c&&(a=a.toLowerCase(),b=b.toLowerCase());return b&&0<=b.indexOf(a)}},C=function(a){return(a=F[a])?a:!1},I=function(a){for(var b in F)if(F.hasOwnProperty(b)&&a===F[b])return b;return!1},D=function(b){var c,e,d=0;for(c=0;c<b.length;c+=1)e=a.utils.getDateFromContextFormat(b[c]),e>=k&&(d+=1);return d},J=function(b,c){var e=!1,d,s,f=[],k=[];switch(b[0]){case "and":k=E.and;break;default:return}s=function(b){var e=
[],s,f;s=c[b.keyType];if(s.hasOwnProperty(b.keyValue)){d=a.evaluator.getMatcherFunction(b.match);f=s[b.keyValue];for(s=0;s<f.length;s+=1)e.push(d(b.content,f[s]))}else e.push(!1);return E.or.apply(this,e)};for(e=1;e<b.length;e+=1)f.push(s(b[e]));return e=k.apply(this,f)},B=function(b){var c=!1;switch(b){case "android":c=/(Android|\sHTC|Silk)/i.test(m)&&!B("androidtablet")&&!B("windowsphone");break;case "ios":c=/(iPhone|iPod)/i.test(m)&&!B("windowsphone");break;case "othermobile":c=(/(\sPPC|Blackberry|Cricket)/i.test(m)||
/(iPAQ|HTC_Touch|HTC_HD2|HTC-ST7377)/i.test(m)||/(Kindle|LG\d|LG-G|LG-L|LGE|Teleca|POLARIS|MOT-|MOT\d)/i.test(m)||/(Nintendo|Nokia|Symbian|SymbOS|SPV\s|PalmSource|PalmOS)/i.test(m)||/(SAMSUNG|sam-r\d|samr\d|SCH-A950|SEC-SGH|SHARP|SIE-|UP\.BROWSER)/i.test(m)||/(sonyericsson|UC(\s?)Browser|WebOS|Pantech|MobileExplorer|ZuneWP7)/i.test(m)||/(Opera Mini|Opera Mobi)/i.test(m))&&(!B("android")&&!B("ios"))&&!B("windowsphone");break;case "androidtablet":c=/(Android|Silk)/i.test(m)&&!/(mobile|Opera Mini|Opera mobi)/i.test(m)||
/(Nexus 7|Nexus 10|Android 3)/i.test(m)||/(sch-i800|playbook|android*tablet|kindle|gt-p1000|sgh-t849|shw-m180s|a510|a511|a100|dell streak)/i.test(m);break;case "ipad":c=/iPad/i.test(m);break;case "othertablet":c=/(Playbook|hp-tablet|Opera Tab)/i.test(m)&&!B("androidtablet")&&!B("windowstablet");break;case "windowsphone":c=/Windows Phone|Windows CE|Windows Mobile|IEMobile/i.test(m);break;case "windowstablet":c=/Windows.*ARM/i.test(m)&&!B("windowsphone");break;case "desktop":c=!B("android")&&!B("ios")&&
!B("windowsphone")&&!B("othermobile")&&!B("androidtablet")&&!B("ipad")&&!B("windowstablet")&&!B("othertablet");break;default:throw Error("Invalid device type!");}c?(q.device=q.device||{},q.device[b]=z):q.device&&q.device[b]&&(c=a.utils.getDateFromContextFormat(q.device[b])>=k);return c},E={and:function(){var a;for(a=0;a<arguments.length;a+=1)if(!arguments[a])return!1;return!0},or:function(){var a;for(a=0;a<arguments.length;a+=1)if(arguments[a])return!0;return!1},sum:function(){var a,b,c=0;a=0;for(b=
arguments.length;a<b;a+=1)c+=parseInt(arguments[a],10);A={};return c},gte:function(a,b){return a>=b},lte:function(a,b){return a<=b},gt:function(a,b){return a>b},ly:function(a,b){return a<b},eq:function(a,b){return a==b},not:function(a){return!a},matchReferer:function(b){var c=a.utils.parseUri(b),e=g.host===c.host;!e&&!/^www\./.test(c.host)?e=g.host==="www."+c.host:!e&&(/^www\./.test(c.host)&&!/^www\./.test(g.host))&&(e="www."+g.host===c.host);e&&(q.referer=q.referer||{},q.referer[b]=z);return!e&&
q.referer&&q.referer[b]?a.utils.getDateFromContextFormat(q.referer[b])>=k:e},matchLandingpage:function(b){b=l[b];return"undefined"!==typeof b?(b=a.utils.getDateFromContextFormat(b),b>=k):!1},pathVisits:function(b){var e;x.easy.config&&x.easy.config.sharedPages&&(e=x.easy.config.sharedPages[b]);if(e){if(A[e])return 0;A[e]=1;e=d[e]}else e=c[b];return"undefined"!==typeof e&&!a.utils.isArray(e)?(a.api.error("patVisits not an array for id:"+b+", typeof:"+typeof e+", stringified:"+x.JSON.stringify(e),a.ERROR_EVALUATOR_RULE),
0):"undefined"===typeof e?0:D(e)},inSegment:function(a){return"undefined"!==typeof h[a]},enterSegment:function(b){var c=p&&p.enterSegment&&a.utils.inArray(p.enterSegment,b)?!0:!1;b=e&&e.enter?e.enter[b]:null;return c?!0:b?(b=a.utils.getDateFromContextFormat(b),b>=k):!1},leaveSegment:function(b){var c=p&&p.leaveSegment&&a.utils.inArray(p.leaveSegment,b)?!0:!1;b=e&&e.leave?e.leave[b]:null;return c?!0:b?(b=a.utils.getDateFromContextFormat(b),b>=k):!1},customAction:function(a,b){var c=r[a],e=0;if(!c)return!1;
e=D(c);return e>=b},newUser:function(){return 1===b.length||f>=k},matchRefererUrl:function(b,c){var e=a.utils.parseUri(c),d=I(b)+"|"+c;"function"!==typeof b&&(b=C(b));e.path=t(e.path);g.path=t(g.path);if(e=b(e.host+"/"+e.path,g.host+"/"+g.path))q.refererUrl=q.refererUrl||{},q.refererUrl[d]=z;else if(q.refererUrl&&q.refererUrl[d])return a.utils.getDateFromContextFormat(q.refererUrl[d])>=k;return e},matchForm:function(b,c){"function"!==typeof b&&(b=C(b));return a.evaluateEvents.matchEvent("forms",p,
b,c,q,z,k)},matchLink:function(b,c){"function"!==typeof b&&(b=C(b));return a.evaluateEvents.matchEvent("links",p,b,c,q,z,k)},matchSearchengine:function(b,c){var e=!1,d=!1,s=[],f,h,p=b+"|"+c;if(g.queryVariables){switch(b){case "bing":e="bing.com";f="q";break;case "yahoo":e="yahoo.com";f="p";break;case "askcom":e="ask.com";f="q";break;case "google":e="google.";f="q";break;default:return!1}g.queryVariables[f]&&(s=decodeURIComponent(g.queryVariables[f]).split(/\+| |%20/));e=e&&G(e,g.host);if(""!==c){c=
c.split(",");for(f=0;f<s.length;f+=1)for(h=0;h<c.length;h+=1)if(s[f]===c[h]){d=!0;break}}else d=!0;d=e&&d}else d=!1;d?(q.searchEngine=q.searchEngine||{},q.searchEngine[p]=z):q.searchEngine&&q.searchEngine[p]&&(d=a.utils.getDateFromContextFormat(q.searchEngine[p])>=k);return d},matchMetaRules:J,matchMetaTag:function(b,c){var e,d=b+"|"+c,s=!1,f=!1,h=function(a){a===c[e]&&(s=!0)};if(!c)return!1;c=c.split(",");if("keyword"===b&&n.keywords&&0<n.keywords.length){"object"!==typeof c&&(c=[c]);for(e=0;e<c.length;e+=
1)a.utils.each(n.keywords,h);f=s}else if("description"===b&&n.description){f=!0;for(e=0;e<c.length;e+=1)if(-1===n.description.indexOf(c[e])){f=!1;break}}else if("ogtitle"===b&&n.ogtitle){f=!0;for(e=0;e<c.length;e+=1)if(-1===n.ogtitle.indexOf(c[e])){f=!1;break}}else if("ogdescription"===b&&n.ogdescription){f=!0;for(e=0;e<c.length;e+=1)if(-1===n.ogdescription.indexOf(c[e])){f=!1;break}}f?(q.metaData=q.metaData||{},q.metaData[d]=z):q.metaData&&q.metaData[d]&&(f=a.utils.getDateFromContextFormat(q.metaData[d])>=
k);return f},matchCountry:function(b){var c=""!==b&&b===w.country;c?(q.country=q.country||{},q.country[b]=z):q.country&&q.country[b]&&(c=a.utils.getDateFromContextFormat(q.country[b])>=k);return c},matchDevice:B,parse:function(b){switch(b.method){case "conversion":var c=b.conversionType;(b=b.conversionId)&&(c=a.visitsHistory.getConversionIdKey(c,b));return 1<=D(u[c]||[])?!0:!1;default:return!1}},siteVisitCount:function(a){return D(b)},metaCount:function(a){return s.hasOwnProperty(a)?D(s[a]):0}},K=
null,L=null,M=function(a){if("[object Array]"!==Object.prototype.toString.call(a)||0===a.length)throw Error("ruleEvaluator expects an array, given:"+a);var b=a[0];a=a.slice(1,a.length);var c=[],e;if(!E.hasOwnProperty(b)||"function"!==typeof E[b])throw Error("Not a valid evaluate function: "+b);K=b;L=a;for(e=0;e<a.length;e++)"[object Array]"===Object.prototype.toString.call(a[e])?c[e]=M(a[e]):c[e]=a[e];return E[b].apply(window,c)};return{evaluate:function(b,c,e){"undefined"===typeof e&&(e=0);k=new Date(y.toString());
k.setDate(k.getDate()-e);k.setHours(0);k.setMinutes(0);k.setSeconds(0);z=a.utils.getDateInContextFormat(y);A={};try{return p=c,M(b)}catch(d){if(x.easy.DEVEL)throw d;a.api.error("evaluate(): invalid rules, error:"+d.message+", last fn:"+K+", last part:"+x.JSON.stringify(L)+", rule:"+x.JSON.stringify(b),a.ERROR_EVALUATOR_EVALUATE);return null}},setContext:function(a){c=a.pageVisits;b=a.siteVisits;h=a.segments;g=a.referer;l=a.landingPages;s=a.metaCount;n=a.metaData;w=a.country;m=a.userAgent;f=new Date(a.firstVisit);
r=a.customActions;u=a.conversions;e=a.segmentEvents;y=a.evaluationTime;q=a.evaluatedEvents||{}},setSharedContext:function(a){d=a.pageVisits||{}},getContext:function(){return{evaluatedEvents:q}},matchUrl:function(b,c,e,d,f){var s=null,k;"function"!==typeof b&&(b=C(b));if(b===v){if(!b(c,f.path))return!1}else if(c=a.utils.parseUri(c),c.path=t(c.path),f.path=t(f.path),!b(c.path,f.path))return!1;for(s in e)if(e.hasOwnProperty(s)&&(b=C(e[s][0]),c=e[s][1].toString(),k=f.params[s],"undefined"===typeof k||
!b(c,k,!0)))return!1;return d.anchor&&(e=C(d.matcher),!e(d.anchor,f.anchor))?!1:!0},matchMetaRules:J,getMatcherFunction:C,getMatcherName:I,canonizePathSlashes:t}}()}(),function(){a.evaluateEvents=function(){return{matchEvent:function(d,c,b,f,h,g,l){var n;n=a.evaluator.getMatcherName(b)+"|"+f;c[d]&&c[d][0]&&(c=c[d][0],a.utils.matchStringUrls(b,f,c)&&(h[d]=h[d]||{},h[d][n]=g));return!h[d]||!h[d][n]?!1:a.utils.getDateFromContextFormat(h[d][n])>=l}}}()}(),a.baseEvaluator=function(){},a.baseEvaluator.prototype=
{values:{location:function(){return window.location.href},referrer:function(){return document.referrer},segments:function(){return a.context.segments},document:function(){return document}},evaluateErrors:[],evaluatorFunctions:{and:function(){var a;for(a=0;a<arguments.length;a+=1)if(!arguments[a])return!1;return!0},or:function(){var a;for(a=0;a<arguments.length;a+=1)if(arguments[a])return!0;return!1},"+":function(){var a,c,b=0;a=0;for(c=arguments.length;a<c;a+=1)b+=parseFloat(arguments[a]);return b},
">=":function(a,c){return parseFloat(a)>=parseFloat(c)},"<=":function(a,c){return parseFloat(a)<=parseFloat(c)},">":function(a,c){return parseFloat(a)>parseFloat(c)},"<":function(a,c){return parseFloat(a)<parseFloat(c)},"eq?":function(a,c){return a==c},not:function(a){return!a},contains:function(a,c){return this.isString(a)&&-1<a.indexOf(c)},begins:function(a,c){return this.isString(a)&&0===a.indexOf(c)},ends:function(a,c){return this.isString(a)&&this.isString(c)&&a.indexOf(c)===a.length-c.length},
"regex?":function(a,c,b){return RegExp(c,b).test(a)},url:function(){return this.url.apply(this,arguments)},location:function(a,c){return this.url(this.getEvaluatorValue("location"),a,c)},referrer:function(a,c){return this.url(this.getEvaluatorValue("referrer"),a,c)},domelem:function(a,c){var b=this.getEvaluatorValue("document").querySelector(a);if(!b)return null;if(!c)return b;switch(c){case "html":return b.innerHTML;case "text":return b.textContent||b.innerText||null;default:return b.getAttribute(c)||
null}},cookie:function(d){return a.cookies.get(d)},localstorage:function(a){return window.localStorage.getItem(a)},js_var:function(a){a=window[a];return void 0!==a?a:null},js:function(d){a.__evaluatorScope__=this;d=d.replace(/\{\{(.+)\}\}/g,'easy.__evaluatorScope__.getEvaluatorValue("$1")');d=eval(d);a.__evaluatorScope__=null;return d},"var":function(a){return this.getEvaluatorValue(a)},inSegment:function(a){return"undefined"!==typeof this.getEvaluatorValue("segments")[a]}},isString:function(a){return"string"===
typeof a},url:function(d,c,b){var f;if(a.utils.inArray("href protocol host path anchor query".split(" "),c))switch(f=a.utils.parseUri(d),c){case "href":return d;case "query":return b?f.queryKey[b]:f.query;default:return f[c]}},ruleEvaluator:function(d){if(!a.utils.isArray(d)||0===d.length)throw Error("ruleEvaluator expects an array, given:"+d);var c=d[0],b=d.slice(1,d.length),f=[],h;if(!this.evaluatorFunctions.hasOwnProperty(c)||"function"!==typeof this.evaluatorFunctions[c])throw Error("Not a valid evaluate function: "+
c);for(h=0;h<b.length;h++)"[object Array]"===Object.prototype.toString.call(b[h])?f[h]=this.ruleEvaluator(b[h]):f[h]=b[h];try{return this.evaluatorFunctions[c].apply(this,f)}catch(g){return this.addEvaluatorError(d,c,g),!1}},addEvaluatorError:function(a,c,b){this.evaluateErrors.push({rule:a,fn:c,message:b.message})},evaluate:function(d){this.evaluateErrors=[];if(!a.utils.isArray(d))throw Error("baseEvaluator.evaluate() expects an array!");if(0===d.length)return!0;try{return this.ruleEvaluator(d)}catch(c){if(a.DEVEL)throw c;
a.api.error("baseEvaluator.evaluate(): invalid rules, error:"+c.message+", rules:"+x.JSON.stringify(d),a.ERROR_BASE_EVALUATOR_EVALUATE);return null}},addEvaluatorFunction:function(d,c){"function"!==typeof c?a.api.error("baseEvaluator:extendEvaluatorFunctions:: needs fn",a.ERROR_BASE_EVALUATOR_FN_CALL):this.evaluatorFunctions[d]=c},getEvaluatorValue:function(a){return this.values.hasOwnProperty(a)?"function"===typeof this.values[a]?this.values[a]():this.values[a]:null},setEvaluatorValue:function(a,
c){this.values[a]="function"===typeof c?c:function(){return c}},removeEvaluatorValue:function(a){delete this.values[a]},hasEvaluateErrors:function(){return 0<this.evaluateErrors.length},getEvaluateErrors:function(){return this.evaluateErrors}},a.triggers=function(){function d(b,c){a.events.on(b,function(){var e="function"===typeof c?c.apply(null,arguments):{};a.triggers.fireEvent({type:b},e)})}function c(a){return e[a]||function(){}}function b(b){a.utils.each(b,function(a){f(a.on_event)})}function f(b){b&&
(b.type===a.EVENT_DOM_EVENT&&b.eventName&&b.selector)&&!h(b)&&(a.domEvents.listen(document,b.eventName,b.selector,function(c){a.triggers.fireEvent(b)}),u.push(b))}function h(b){return 0<a.utils.map(u,function(a){return g(a,b)}).length}function g(b,c){switch(b.type){case a.EVENT_DOM_EVENT:return b.type===c.type&&b.eventName===c.eventName&&b.selector===c.selector;default:return b.type===c.type}}function l(b,c){return a.utils.filter(m,function(e){return g(e.on_event,b)&&a.triggers.evaluateTrigger(e,
c)})}function n(b){a.utils.isObject(b)&&a.utils.each(b,function(a,b){r.setEvaluatorValue(b,a)})}function w(b){a.utils.isObject(b)&&a.utils.each(b,function(a,b){r.removeEvaluatorValue(b,a)})}var m=null,r,u=[],e={message:function(a){return{id:a.id,revision:a.revision}},conversion:function(a){return{conversion:a}}};return{errors:[],init:function(e){e&&(m=a.utils.clone(e),r=new a.baseEvaluator,d(a.EVENT_SCRIPT_LOAD),d(a.EVENT_DOM_READY),d(a.EVENT_MESSAGE_SHOW,c("message")),d(a.EVENT_MESSAGE_CLICK,c("message")),
d(a.EVENT_MESSAGE_TRUE_DISPLAY,c("message")),d(a.EVENT_CONVERSION,c("conversion")),b(m))},firedEvents:[],sendEvaluateError:function(b,c){a.api.error("trigger:"+b.id+", rule:"+c.rule+", message:"+c.message,a.ERROR_TRIGGER_RULE);a.triggers.errors.push([b,c])},getEvaluator:function(){return r},evaluateTrigger:function(b,c){if(!r)return a.api.error("triggers:evaluateTrigger():: evaluator not initialized!",a.ERROR_TRIGGER_FN_CALL),!1;n(c);var e=r.evaluate(b.rules);w(c);if(r.hasEvaluateErrors())return a.utils.each(r.getEvaluateErrors(),
function(c){a.triggers.sendEvaluateError(b,c)}),!1;e&&a.events.trigger(a.EVENT_TRIGGER_FIRE,b,c);return e},fireEvent:function(b,c){if(!m||!r)a.api.error("triggers:fireEvent():: triggers not initialized!",a.ERROR_TRIGGER_FN_CALL);else{var e=l(b,c);a.events.trigger(a.EVENT_TRIGGER_EVENT,{event:b,data:c,triggers:e})}}}}(),function(){var d=function(c,b){a.console.log("easy.events.trigger: "+c,b);window.easybenchmark&&window.easybenchmark.debugLog&&(window.easybenchmark.debugLog("Triggered: "+c),window.easybenchmark.setLoadTime(c))};
a.events={_triggeredEvents:{},_callbacks:{},_addListener:function(a,b){this._callbacks[a]||(this._callbacks[a]=[]);this._callbacks[a].push(b)},_handleTriggered:function(c,b){this._triggeredEvents[c]&&a.utils.each(this._triggeredEvents[c],function(a){this._handleCallback(b,a)},this)},_handleCallback:function(a,b){a.handled&&"once"===a.type||(a.handled=!0,a.fn.apply(a.context,b))},_bind:function(c,b,f,d){b=a.addExceptionHandling(b,{context:f});b={fn:b,context:f,type:d,handled:!1};this._handleTriggered(c,
b);this._addListener(c,b)},once:function(a,b,f){this._bind(a,b,f,"once")},on:function(a,b,f){this._bind(a,b,f,"on")},trigger:function(c){var b=Array.prototype.slice.call(arguments,1),f=this._callbacks[c]||[];d(c,b);this._triggeredEvents[c]||(this._triggeredEvents[c]=[]);this._triggeredEvents[c].push(b);a.utils.each(f,function(a){this._handleCallback(a,b)},this)},isTriggered:function(a){return Boolean(this._triggeredEvents[a])}}}(),function(){a.callbacks={CB_CONNNECT_SEGMENTS:function(){a.context.lastConnectSegments.time=
(new Date).getTime();a.context.lastConnectSegments.status="connected";a.context.save()}}}(),function(){var d,c=function(){};c.prototype={run:function(a){a||(a=this.createException());var c=this.mode(a);return"other"===c?this.other(arguments.callee):this[c](a)},createException:function(){try{this.undef()}catch(a){return a}},mode:function(a){return a.arguments&&a.stack?"chrome":a.stack&&a.sourceURL?"safari":a.stack&&a.number?"ie":"string"===typeof a.message&&"undefined"!==typeof window&&window.opera?
!a.stacktrace||-1<a.message.indexOf("\n")&&a.message.split("\n").length>a.stacktrace.split("\n").length?"opera9":!a.stack?"opera10a":0>a.stacktrace.indexOf("called from line")?"opera10b":"opera11":a.stack&&!a.fileName?"chrome":a.stack?"firefox":"other"},chrome:function(a){a=(a.stack+"\n").replace(/^\S[^\(]+?[\n$]/gm,"").replace(/^\s+(at eval )?at\s+/gm,"").replace(/^([^\(]+?)([\n$])/gm,"{anonymous}()@$1$2").replace(/^Object.<anonymous>\s*\(([^\)]+)\)/gm,"{anonymous}()@$1").split("\n");a.pop();return a},
safari:function(a){return a.stack.replace(/\[native code\]\n/m,"").replace(/^(?=\w+Error\:).*$\n/m,"").replace(/^@/gm,"{anonymous}()@").split("\n")},ie:function(a){return a.stack.replace(/at Anonymous function /gm,"{anonymous}()@").replace(/^(?=\w+Error\:).*$\n/m,"").replace(/^.*at (\w+) \(([^\)]+)\)$/gm,"$1@$2").split("\n")},firefox:function(a){return a.stack.replace(/(?:\n@:0)?\s+$/m,"").replace(/^[\(@]/gm,"{anonymous}()@").split("\n")},opera11:function(a){var c=/^.*line (\d+), column (\d+)(?: in (.+))? in (\S+):$/;
a=a.stacktrace.split("\n");for(var d=[],g=0,l=a.length;g<l;g+=2){var n=c.exec(a[g]);if(n){var w=n[4]+":"+n[1]+":"+n[2],n=n[3]||"global code",n=n.replace(/<anonymous function: (\S+)>/,"$1").replace(/<anonymous function>/,"{anonymous}");d.push(n+"@"+w+" -- "+a[g+1].replace(/^\s+/,""))}}return d},opera10b:function(a){var c=/^(.*)@(.+):(\d+)$/;a=a.stacktrace.split("\n");for(var d=[],g=0,l=a.length;g<l;g++){var n=c.exec(a[g]);n&&d.push((n[1]?n[1]+"()":"global code")+"@"+n[2]+":"+n[3])}return d},opera10a:function(a){var c=
/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i;a=a.stacktrace.split("\n");for(var d=[],g=0,l=a.length;g<l;g+=2){var n=c.exec(a[g]);n&&d.push((n[3]||"{anonymous}")+"()@"+n[2]+":"+n[1]+" -- "+a[g+1].replace(/^\s+/,""))}return d},opera9:function(a){var c=/Line (\d+).*script (?:in )?(\S+)/i;a=a.message.split("\n");for(var d=[],g=2,l=a.length;g<l;g+=2){var n=c.exec(a[g]);n&&d.push("{anonymous}()@"+n[2]+":"+n[1]+" -- "+a[g+1].replace(/^\s+/,""))}return d},other:function(a){for(var c=/function\s*([\w\-$]+)?\s*\(/i,
d=[],g,l;a&&a.arguments&&10>d.length;)g=c.test(a.toString())?RegExp.$1||"{anonymous}":"{anonymous}",l=Array.prototype.slice.call(a.arguments||[]),d[d.length]=g+"("+this.stringifyArguments(l)+")",a=a.caller;return d},stringifyArguments:function(a){for(var c=[],d=Array.prototype.slice,g=0;g<a.length;++g){var l=a[g];void 0===l?c[g]="undefined":null===l?c[g]="null":l.constructor&&(l.constructor===Array?c[g]=3>l.length?"["+this.stringifyArguments(l)+"]":"["+this.stringifyArguments(d.call(l,0,1))+"..."+
this.stringifyArguments(d.call(l,-1))+"]":l.constructor===Object?c[g]="#object":l.constructor===Function?c[g]="#function":l.constructor===String?c[g]='"'+l+'"':l.constructor===Number&&(c[g]=l))}return c.join(",")}};d=function(){var a=navigator.userAgent.toLowerCase();return-1!==a.indexOf("msie")?parseInt(a.split("msie")[1],10):!1};a.sendErrorEvent=function(b,c,d){var g={},l=a.ERROR_UNKNOWN;g.text=b;try{x.JSON.stringify(c),g.trace=c}catch(n){}if(d)try{x.JSON.stringify(d),a.utils.extend(g,d),d.code&&
(l=d.code)}catch(w){}a.api&&a.api.error(x.JSON.stringify(g),l)};a.addExceptionHandling=function(b,f){var h,g,l;f=f||{};if(b.hasExceptionHandling)return b;d()&&10>d()?(g=function(b,c,d){a.sendErrorEvent(b,[c+":"+d],f);window.onerror=h;return!0},l=function(){h=window.onerror;window.onerror=g;var a=b.apply(f.context||this,arguments);window.onerror=h;return a}):l=function(){try{return b.apply(f.context||this,arguments)}catch(d){if(a.DEVEL)throw a.console.error((new c).run(d)),d;a.sendErrorEvent(d.toString(),
(new c).run(d),f)}};l.hasExceptionHandling=!0;return l};a.setTimeout=function(b,c){var d=a.addExceptionHandling(b);return setTimeout(d,c)};a.setInterval=function(b,c){var d=a.addExceptionHandling(b);return setInterval(d,c)}}(),function(){a.uid=function(){var d=null,c=function(){return null!==d},b=function(a){var b={"bingbot|adidxbot|BingPreview":function(){return"bingbot.00000000"},"Google Web Preview|Googlebot|Mediapartners-Google|AdsBot-Google":function(){return"webpreview.00000000"},"AdobeAIR/(\\d+(\\.\\d+)*)":function(a){return"adobeair_"+
a[1].replace(/\./g,"")+".00000000"}},c,d;for(c in b)if(b.hasOwnProperty(c)&&(d=a.match(RegExp(c))))return b[c](d)},f=function(a){d=!(null===a||"undefined"===typeof a)&&!/^\s*$/.test(a)?a:null};return{newUid:function(h){if("undefined"===typeof h||null===h)return a.console.log("easy.uid.newUid(): UserAgent string is undefined"),null;if(!c()){var g;if(!(g=b(h))){g=new Date;var l=2166136261,n;for(n=0;n<h.length;n+=1)l+=(l<<1)+(l<<4)+(l<<7)+(l<<8)+(l<<24),l^=h.charCodeAt(n);h=(l&2147483647).toString(36)+
".";g=g.getTime().toString(36);g=h+g}f(g)}return d},get:function(){return d},set:f,isDefined:c}}()}(),function(){var d=!1,c=[],b={},f={},h={};a.segmentchange=function(){var g=[],l,n,w=function(b){return 1===a.context.segments[b]},m=function(){var b,c;(new Date).setTime((new Date).getTime()+2592E6);b=[];for(c in a.context.targetgroups)a.context.targetgroups.hasOwnProperty(c)&&b.push(a.context.targetgroups[c]);b="."+b.join(".");a.cookies.set("frosmo_keywords",b,30)},r,u,e,s=function(b,c){var d;d=new Date;
d.setSeconds(d.getSeconds()+3);d=d.valueOf();var f=a.utils.getDateInContextFormat(n);"enter"===c?(a.context.segmentEvents.enter[b]=f,delete a.context.segmentEvents.leave[b]):"leave"===c&&(a.context.segmentEvents.leave[b]=f,delete a.context.segmentEvents.enter[b]);a.context.segmentChanged=d;a.context.save();e()},k=function(c,e){b=b||{};f=f||{};b[c]=b[c]||[];f[c]=f[c]||[];a.utils.inArray(f[c],e)||f[c].push(e);a.utils.inArray(b[c],e)||b[c].push(e)},q=function(a,c){var e,d=[],f=b[a];if(f){for(e=0;e<f.length;e+=
1)f[e]!==c&&d.push(f[e]);b[a]=d}},y=function(a,b){var c=h[a];h[a]=b;c!==b&&(0===b?(k("leaveSegment",a),q("enterSegment",a)):1===b&&(k("enterSegment",a),q("leaveSegment",a)),h[a]=b)},z=function(b,c){var e;if(w(b))return!1;c?(a.context.segments[b]=1,a.context.save(),a.cookies.remove("frosmo_segments"),a.store.set("frosmo_segments",a.context.segments),a.context.lastConnectSegments.status||(a.api.connectSegments(a.uid.get()),a.context.lastConnectSegments.status="queued",a.context.save()),a.api.setUserSegment(null,
b,"value1"),s(b,"enter"),a.events.trigger(a.EVENT_SEGMENT_ENTER,b)):(e=a.utils.clone(a.context.segments),e[b]=1,t({enterSegment:[b]},new Date,e));return!0},A=function(b,c){var e;if(!w(b))return!1;c?(delete a.context.segments[b],a.context.save(),a.cookies.remove("frosmo_segments"),a.store.set("frosmo_segments",a.context.segments),a.api.setUserSegment(null,b,"value0"),s(b,"leave"),a.events.trigger(a.EVENT_SEGMENT_LEAVE,b)):(e=a.utils.clone(a.context.segments),e[b]=0,t({leaveSegment:[b]},new Date,e));
return!0},p=function(b,c,e){return""===b||null===b||"undefined"===typeof b?!1:a.evaluator.evaluate(b,c,e)},t=function(c,e,d){var s={},k=[];h=d||a.utils.clone(a.context.segments);f=c;for(d=0;10>d;d+=1){b={};a.segmentchange.evaluateSegments(c,e);a.segmentchange.evaluateSegmentGroups(c);k=[];a.utils.each(b.enterSegment,function(a){k.push(a)});a.utils.each(b.leaveSegment,function(a){k.push(a)});if(0===k.length)break;a.utils.each(k,function(a){s[a]=s[a]?s[a]+1:1})}10===d&&(c="segmentchange.evaluate(): max evaluation rounds:10 reached\n"+
x.JSON.stringify(s),a.api.error(c,a.ERROR_SEGMENTCHANGE_EVALUATE),a.console.log(c));G(h)&&a.segmentchange.updateTargetGroups();h={};return{evaluationRounds:d,changesBySegment:s}},G=function(b){var c,e=0;a.utils.each(b,function(b,d){c=a.context.segments.hasOwnProperty(d);0===b&&c?(A(d,!0),e+=1):1===b&&!c&&(z(d,!0),e+=1)});return e},v=function(b,c){var e={},d={},f={};a.utils.each(b,function(a){d[a]=1;e[a]=1});a.utils.each(c,function(a){f[a]=1;e[a]=1});a.utils.each(a.utils.keys(e),function(b){var c=
1===d[b],e=1===f[b];c&&!e?a.events.trigger(a.EVENT_TARGETGROUP_LEAVE,b):!c&&e&&a.events.trigger(a.EVENT_TARGETGROUP_ENTER,b)})};u=function(b){v(a.context.targetgroups,b);a.context.targetgroups=b;m();a.campaign.stampUser(new Date);a.survey.clearLastRequestTime();a.context.save()};r=function(){var b,c=a.api.getApiUrl("keywords");!d&&!x.easy.noAsyncApi&&(d=!0,b={origin:a.config.api.origin,cid:a.uid.get()},x.request.jsonp(c+"?",{params:b,on:{success:function(a){"object"===typeof a&&("ok"===a.status&&
a.result&&a.result.keywords&&0<a.result.keywords.length)&&u(a.result.keywords);d=!1},fail:function(){d=!1}}}))};e=function(b){var e,d,f=[3,5,7,10,30,60,120,240];if(!x.easy.noAsyncApi)if(x.easy.config.targetGroups)if(b)r();else{if(0!==a.context.segmentChanged){for(e=0;e<c.length;e+=1)clearTimeout(c[e]);c=[];b=((new Date).getTime()-a.context.segmentChanged)/1E3;for(e=0;e<f.length;e+=1)f[e]>=b&&(d=a.setTimeout(r,1E3*(f[e]-b)),c.push(d))}}else u([])};return{init:function(a,b){f={};g=a.segments;l=a.segmentGroups||
{};n=b},evaluate:t,evaluateSegments:function(b,c){var e,d,f,s;a.context.evaluationTime=c;a.evaluator.setContext(a.context);a.sharedContext&&a.evaluator.setSharedContext(a.sharedContext);for(s=0;s<g.length;s+=1)f=g[s],e="sggp_"+f.group,l.hasOwnProperty(e)&&(l[e].rules||(l[e].rules={}),l[e].rules[f.name]=f),b.rule=f,d=p(f.leave,b,f.timelimit),e=p(f.enter,b,f.timelimit),null===e||null===d||(e&&d&&(e=!1),h.hasOwnProperty(f.name)?(d||!e&&f.autoexit)&&y(f.name,0):e&&y(f.name,1));a.context.evaluatedEvents=
a.evaluator.getContext().evaluatedEvents},evaluateSegmentGroups:function(b){var c=function(b,c,e){var d,f,s=[],k=[],q=[],p=[],g=function(b,c){var e=!1,d,f,s,k=function(a){a=x.JSON.stringify(a);return a=a.replace(/conversionType":"([^"]+)","conversionId":"([^"]+)"/g,function(a,b,c){return'conversionType":"'+b+" "+c+'"'})}(b.enter);for(d in c)if(c.hasOwnProperty(d)){s=c[d];if(e)break;if(a.utils.isArray(s))for(f=0;f<s.length;f+=1)if(-1<k.indexOf('"'+s[f]+'"')){e=!0;break}}return e};for(d=0;d<b.length;d+=
1)f=b[d],1===h[f]&&g(c[f],e)&&q.push(f),a.context.segments.hasOwnProperty(f)&&1===h[f]?s.push(f):1===h[f]&&k.push(f);(c=q.pop())||(c=0<s.length?s.pop():k.pop());for(d=0;d<b.length;d+=1)b[d]===c?y(b[d],1):1===h[b[d]]&&(y(b[d],0),p.push(b[d]))};a.utils.each(l,function(a){if("funnel"===a.mode){a=a.segments;var e,d=-1;for(e=0;e<a.length;e+=1)1===h[a[e]]&&(d=e);for(e=0;e<d;e+=1)1===h[a[e]]&&y(a[e],0)}else"radio"===a.mode&&c(a.segments,a.rules,b)})},expireSegments:function(){var b,c,e=new Date(n),d=!1;
e.setHours(0);e.setMinutes(0);e.setSeconds(0);e.setMilliseconds(0);for(b=0;b<g.length;b+=1)a.context.lastVisit.time&&(g[b].timelimit&&g[b].autoexit&&a.context.segmentEvents.enter[g[b].name])&&(c=new Date(a.context.lastVisit.time),c.setDate(c.getDate()+g[b].timelimit),c.setHours(0),c.setMinutes(0),c.setSeconds(0),c.setMilliseconds(0),c<e&&(delete a.context.segments[g[b].name],d=!0));d&&a.context.save()},updateKeywordsCookie:m,updateTargetGroups:e,segmentChanged:s,updateTargetGroup:u,setSegment:z,removeSegment:A,
isSegmented:function(){for(var b in a.context.segments)if(a.context.segments.hasOwnProperty(b)&&w(b))return!0;return!1},inSegment:w}}()}(),function(){a.uihooks=function(){var d=[],c=[],b=function(b,c,d){var l,n,w;for(l=0;l<c.length;l+=1)if(w=c[l][0],n=c[l][1],a.utils.matchStringUrls(w,n,b)){d();break}};return{initForms:function(d){var h=this,g=function(b,c){a.segmentchange.evaluate({forms:[c.action]},new Date)};a.utils.each(document.getElementsByTagName("form"),function(l){b(l.action,d,function(){a.utils.inArray(c,
l)||(c.push(l),a.domEvents.listen(l,"submit",g,h))})})},initLinks:function(c){var h=this,g=function(b,c){a.segmentchange.evaluate({links:[c.href]},new Date)};a.utils.each(document.getElementsByTagName("a"),function(l){b(l.href,c,function(){a.utils.inArray(d,l)||(d.push(l),a.domEvents.listen(l,"mousedown",g,h))})})},links:d,forms:c}}()}(),function(){a.main=function(){var d=null,c,b={href:null,referer:null},f,h=function(b){a.utils.inArray(["success","failure","initializing"],b)&&(f=b)},g=function(b,
c){"success"===f?a.api.error("main.initFailure called, but state = success",a.ERROR_INIT):(a.events.trigger(a.EVENT_INIT_FAILURE),h("failure"),b&&a.api.error(b,c))},l=function(){a.setInterval(function(){a.context.save(!0)},1E3)},n=function(){"failure"===f?a.api.error("main.initSuccess called, but state = failure",a.ERROR_INIT):(a.events.trigger(a.EVENT_INIT_SUCCESS),h("success"),a.contextLoader.useServerApi(a.context.userAgent)&&l())},w=function(b,d,f){var q=a.context.referer;d=a.utils.getLocationFromUrl(d);
var g=a.utils.getLocationFromUrl(b.href),h=a.utils.getLocationFromUrl(b.href),u,p,t;if(d.host===g.host)a.context.referer=d;else if(d.host!==q.host||d.path!==q.path||d.queryVariables!==q.queryVariables)a.context.referer=d,b.href&&a.utils.each(f,function(b,e){u=b[2];p=a.evaluator.getMatcherFunction(b[0]);t=b[1];a.evaluator.matchUrl(p,t,u,{},h)&&(a.context.landingPages[e]=a.utils.getDateInContextFormat(c))}),a.context.landingpage=a.utils.getLocationFromUrl(b.href),a.context.save()},m=function(){var b=
function(b){var c="";a.utils.each("US DE GB NL CA FR EU RU IT BE SE CH AU ES JP AT UA PL FI HK".split(" "),function(a){a===b&&(c=b)});return c};a.location.getLocation(function(d){var f=b(d.country2);f&&a.context.country.country!==f?(a.context.country.country=f,a.segmentchange.evaluate({links:[],forms:[]},c)):a.context.country.country=f;a.context.country.time=c.getTime();a.context.country.latitude=d.latitude;a.context.country.longitude=d.longitude;a.context.save()})},r=function(b,f){if(18E5<=c.getTime()-
a.context.lastPageView.time){var k=c,q;q=a.utils.getLocationFromUrl(f);var g=a.utils.getLocationFromUrl(b.href);q=""===f?"direct":q.host===g.host?"direct":q.host;a.api.setSessionStartTime(k.getTime());a.segmentchange.expireSegments();"connected"===a.context.lastConnectSegments.status&&a.api.connectSegments(a.uid.get());a.context.lastVisit.time=k.getTime();a.context.lastVisit.source=q;d.sharedContext&&a.store.set("source",q);a.context.referer=a.utils.clone(a.defaultContext.referer);a.context.landingpage=
a.utils.clone(a.defaultContext.landingpage);m();0===a.context.siteVisits.length&&!a.context.firstVisit&&(a.context.firstVisit=k.toString());a.visitsHistory.addSiteVisit(k);a.context.sessionPathVisits={};a.context.save();a.api.visit(null,q);a.segmentchange.updateTargetGroups(!0);a.events.trigger(a.EVENT_VISIT)}a.context.lastPageView.time=c.getTime();a.context.save()},u=function(e,f,k){var q;"string"!==typeof f&&(a.api.error("main.updateLocation: Invalid referer",a.ERROR_REFERER),f="");"string"!==typeof e.href&&
(q="main.updateLocation: Invalid location - href : "+typeof e.href,a.api.error(q,a.ERROR_REFERER));"string"!==typeof e.search&&(q="main.updateLocation: Invalid location - search : "+typeof e.search,a.api.error(q,a.ERROR_REFERER));b.href=e.href;b.referer=f;r(e,f);w(e,f,d.landingPages);a.campaign.init(d,window.navigator.userAgent);a.survey.request(e);a.visitsHistory.addPageVisit(e,d.pages,c,a.addExceptionHandling(function(b){a.segmentchange.evaluate({links:[],forms:[],pageVisits:b||[]},c);a.context.save();
k&&k()}))};return{init:function(b,f,k){delete a.events._triggeredEvents[a.EVENT_INIT_SUCCESS];d=f||{};c=k||new Date;a.context=b;a.api.setRequestEnabled(!0);a.context.eventQueue&&0<a.context.eventQueue.length&&(a.api.importEvents(a.utils.clone(a.context.eventQueue),c),a.api.processEventQueue());a.sharedContext={};a.context.lastConnectSegments&&(a.api.isConnected=!0);if("undefined"===typeof d.segments||null===d.segments)return g("main.init: Segments are not defined",a.ERROR_INIT),!1;a.api.setSessionStartTime(a.context.lastVisit.time);
a.segmentchange.init(d,c);d.customActions&&a.customAction.init(d.customActions);d.conversions&&a.conversion.init(d.conversions);d.googleAnalytics&&a.googleAnalytics.init(d.googleAnalytics);a.user.init();a.domEvents.ready(function(){a.uihooks.initForms(d.forms);a.uihooks.initLinks(d.links)});a.preview.init();a.segmentchange.updateTargetGroups();if(d.sharedPages)a.sharedPagesRpc=new x.easy.xdmLocal({remote:"http://otavamedia.inpref.com/frosmo.xdm.html",onReady:a.addExceptionHandling(function(){a.sharedPagesRpc.get("sharedPages",
a.addExceptionHandling(function(b){a.sharedContext.pageVisits=a.utils.clone(b);a.handleCurrentPage();n()}))})});else return a.handleCurrentPage(),n(),!0},updateLocation:u,updateBrowserData:function(b,f){b.navigator.userAgent&&(a.context.userAgent=b.navigator.userAgent);var k=b.document.head,q,g,h={name:{},property:{}},l,p,t=[];if(k){for(q=0;q<k.children.length;q+=1)if(k.children[q].tagName&&"meta"===k.children[q].tagName.toLowerCase())if(p=k.children[q].getAttribute("content"),k.children[q].getAttribute("name")){l=
k.children[q].getAttribute("name");var r=h.name;r.hasOwnProperty(l)||(r[l]=[]);r[l].push(p)}else k.children[q].getAttribute("property")&&(l=k.children[q].getAttribute("property"),r=h.property,r.hasOwnProperty(l)||(r[l]=[]),r[l].push(p));for(g in d.meta)d.meta.hasOwnProperty(g)&&a.evaluator.matchMetaRules(d.meta[g],h)&&(a.visitsHistory.addMetaCount(g,c),t.push(g));a.segmentchange.evaluate({events:t},c)}u(b.location,b.document.referrer,f);a.messageTrueDisplay.clearDisplayedMessageList();a.context.save()},
logPageload:function(){var b=0,c=function(){var b=[],c;for(c in a.context.segments)a.context.segments.hasOwnProperty(c)&&b.push(c);a.api.logPageLoad(b,a.adBlockerIsRunning)},d=function(){var b=(!0===a.DEVEL?"//inpref-dev.s3.amazonaws.com":"//inpref.s3.amazonaws.com")+"/sites/advertisement.js?time="+(new Date).getTime(),c;a.adBlockerIsRunning=1;c=document.createElement("script");c.setAttribute("type","text/javascript");c.setAttribute("src",b);document.getElementsByTagName("head")[0].appendChild(c)},
f=function(){a.runningTests?c():a.adBlockerIsRunning&&1E3>b?(a.setTimeout(f,100),b+=100):(c(),a.adBlockerTestRunning=0)};a.adBlockerTestRunning=1;(function(){var b=!1;a.utils.each(document.getElementsByTagName("script"),function(a){a.src&&/\/?EAS_tag\.1\.0\.js$/i.test(a.getAttribute("src"))&&(b=!0)});a.adBlockerIsRunning=b&&!window.EAS_server?1:0})();0===a.adBlockerIsRunning&&d();f()},VISIT_TIMEOUT:18E5,getCurrentBrowserData:function(){return a.utils.clone(b)},onInitSuccess:function(b){a.events.once(a.EVENT_INIT_SUCCESS,
b)},isInitialized:function(){return a.events.isTriggered(a.EVENT_INIT_SUCCESS)},initFailure:g,initStart:function(){a.events.trigger(a.EVENT_INIT_START);h("initializing")},getState:function(){return f}}}()}(),a.defaultConfig={hiddenMessageClickTracking:!1,xdmIframeInHead:!1},function(){a.api=function(){var d=0,c=!1,b,f,h=!1,g=[],l=[],n={optimizer:"optimizerApi",segment:"segmentApi",message:"messageApi",keywords:"segments/api/keywords",pageload:"pageloadApi",location:"location",extension:"extension-api/",
survey:"surveyApi",event:"eventsApi",sync:"syncApi",contextApi:"contextApi",preview:"previewApi"},w=null,m=function(a){return!n.hasOwnProperty(a)||!b?null:b+n[a]},r=function(){return{cookieId:a.uid.get(),origin:f,ver:a.getVersion()}},u=function(b,c){var e,d,f,k={};for(e in c)if(c.hasOwnProperty(e))if(c[e]instanceof Object)for(d in f=c[e],f)f.hasOwnProperty(d)&&(k[d]=f[d]);else k[e]=void 0===c[e]?null:c[e];for(e in k)k.hasOwnProperty(e)&&(null===k[e]||!1===k[e]?k[e]="":!0===k[e]&&(k[e]="1"));k=a.utils.extend(k,
r());d=[];for(e in k)k.hasOwnProperty(e)&&d.push(encodeURIComponent(e)+"="+encodeURIComponent(k[e]));return m(b)+"?"+d.join("&")},e=function(a){return 10>a?"0"+a:""+a},s=function(b,e,d){if(!c&&!a.noAsyncApi){var f=new Image;a.domEvents.listen(f,"load",function(){a.console.log("Call URL to was success "+f.src);g.shift();z();if(e&&a.callbacks[e])a.callbacks[e]();c=!1;k()});a.runningTests&&a.domEvents.listen(f,"error",function(){g.shift();c=!1;k()});c=!0;f.src=b+"&"+d;l.push(f);a.console.log("frosmo.easy.api: Call URL "+
b)}},k=function(){if(0!==g.length){var c=g[0][0],e=g[0][1],d=g[0][2];"undefined"===typeof b||"undefined"===typeof f?a.console.error('frosmo.easy.api: API not initialized, event "'+c+'" postponed'):s(c,e,d)}},q=function(a){a=a||new Date;var b=""+e(a.getUTCDate())+e(a.getUTCHours())+e(a.getUTCMinutes());a=w?a.getTime()-w.getTime():0;return b+a},y=function(b,c){if(b){c||(c=null);if(!h)throw"Api request before context initialized: "+b;g.push([b,c,q(),(new Date).getTime()]);z();a.console.log('frosmo.easy.api: Call queued "'+
b+'" event');k()}},z=function(){a.context.eventQueue=a.utils.clone(g);a.context.save()},A=function(){return!w?"":""+w.getUTCFullYear()+e(w.getUTCMonth()+1)+e(w.getUTCDate())+e(w.getUTCHours())+e(w.getUTCMinutes())+e(w.getUTCSeconds())};return{VERSION:"2.14",init:function(a,c){b=a;f=c},setSessionStartTime:function(a){w=a?new Date(a):null},setRequestEnabled:function(a){h=Boolean(a)},importEvents:function(b,c){var e=new Date(c);e.setDate(e.getDate()-1);if(!a.utils.isArray(b))throw z(),"Imported api events object is not an array";
b.length>a.API_QUEUE_MAX_EVENTS?a.api.error("Too many elements in api queque ("+b.length+")",a.ERROR_EVENT_QUEUE_FULL):a.utils.each(b,function(b){var c,d,f,k;if(!a.utils.isArray(b))throw z(),"Imported event is not an array: "+b;c=b[0];d=b[1];f=b[2];k=b[3];if(!c)throw z(),"Imported event doesn't container URL: "+c;if(d&&!a.callbacks[d])throw z(),"Invalid callback for imported event: "+d;f&&(k&&k>=e.getTime())&&g.push(b)});z()},eventQueue:g,processEventQueue:k,setGetUrl:function(a){var b=u;u=a;return b},
setCallUrl:function(a){var b=y;y=a;return b},getCallUrl:u,setGetCallId:function(a){q=a},getCallId:q,error:function(b,c){var e;e=window.location.href;var f=navigator.userAgent,k=new Image;c=c||0;e=u("optimizer",{event:"error",error:b,code:c,href:e,ua:f});k.src=e+"&"+(d+=1);l.push(k);a.console.error(b+" code:"+c)},custom:function(b){a.utils.extend(b,r());b.event="custom";b=u("optimizer",b);y(b)},connectSegments:function(a){a=m("segment")+"?origin="+f+"&cookieId="+a;y(a,"CB_CONNNECT_SEGMENTS")},getApiUrl:m,
login:function(a,b){var c=u("optimizer",{event:"login",userId:a,source:b});y(c)},buyProduct:function(a,b,c,e,d,f,k,s,g,q){a=u("optimizer",{event:"buyProduct",userId:a,productType:b,productId:c,netValue:e,fee:d,tax:f,paymentChannel:k,customId:s,transactionId:g,quantity:q,sessionStart:A()});y(a)},setUserData:function(a,b){},showMessage:function(a,b,c){a=u("optimizer",{event:"showMessage",userId:a,messageId:b,revision:c,sessionStart:A()});y(a)},clickMessage:function(a,b,c){a=u("optimizer",{event:"clickMessage",
userId:a,messageId:b,revision:c,sessionStart:A()});y(a)},visit:function(a,b,c){a=u("optimizer",{event:"visit",userId:a,source:b,newSession:c});y(a)},setProductData:function(a,b,c){a=u("optimizer",{event:"setProductData",productId:a,productAttributes:b,userId:c});y(a)},setConversionData:function(a,b,c){b.productConversion=1;a=u("optimizer",{event:"setProductData",productId:a,productAttributes:b,userId:c});y(a)},setUserSegment:function(a,b,c){a=u("optimizer",{event:"setUserSegment",userId:a,segmentName:b,
segmentValue:c});y(a)},clearUserSegment:function(a,b){var c=u("optimizer",{event:"clearUserSegment",userId:a,segmentName:b});y(c)},trueDisplay:function(a,b,c){a=u("optimizer",{event:"trueDisplay",userId:a,messageId:b,revision:c,sessionStart:A()});y(a)},logPageLoad:function(b,c){var e=r(),d=m("pageload")+"?cookieId="+e.cookieId+"&";c&&(d+="blocker="+c+"&");d+="origin="+e.origin+"&segments=";a.utils.isArray(b)&&0<b.length&&(d+=b.join("|"));d+="&ver="+e.ver;y(d)},sendCustomAction:function(a,b,c){var e=
new Image;a=u("event",{method:"customAction",name:a,value:b,title:c});e.src=a+"&"+(d+=1);l.push(e)}}}()}(),a.contextLoader=function(){var d="",c=function(){var b=navigator.vendor&&-1<navigator.vendor.indexOf("Apple"),c=RegExp(/(ipad|iphone|ipod)/i).test(d);return(b||c)&&a.config.contextApi},b={getUid:function(b,c){b(a.cookies.get("frosmo_uid"))},setUid:function(b,c,d){a.cookies.set("frosmo_uid",b,3650);c&&c()},getContext:function(b,c){if(!a.uid.get())throw"serverApi.getContext():: Error uid not set";
a.contextApi.get("context",b,c)},setContext:function(b,c,d){if(!a.uid.get())throw"serverApi.getContect():: Error uid not set";a.contextApi.set("context",b,c,d)}},f={getUid:function(b,c){a.sharedContextRpc.get("UID",b,c)},setUid:function(b,c,d){a.sharedContextRpc.set("UID",b,c,d)},getContext:function(b,c){a.sharedContextRpc.get("context",b,c)},setContext:function(b,c,d){a.sharedContextRpc.set("context",b,c,d)}},h={getUid:function(b,c){b(a.store.get("UID"))},setUid:function(b,c,d){a.store.set("UID",
b);c&&c()},getContext:function(b,c){b(a.store.get("context"))},setContext:function(b,c,d){a.store.set("context",b);c&&c()}},g=function(b,c){var d=a.defaultContext.clone();return b?(b=a.utils.extend(d,b),b.origin||(b.origin=c.api.origin),b=a.convert.convert(b)):a.utils.extend(d,{origin:a.config.api.origin})},l=function(b,c){var d=!1,f=!1,e;a.events.trigger(a.EVENT_XDM_REQUEST);e="https://"+b.api.origin+".inpref.com/frosmo.xdm.html";e=e.replace(/_/g,"");a.sharedContextRpc=new a.xdmLocal({remote:e,onReady:a.addExceptionHandling(function(){d?
a.api.error("xdmRemote already initialized",a.ERROR_CONTEXT_XDMREADY):(d=!0,f?a.api.error("xdmRemote onReady after timeout",a.ERROR_INIT_CONTEXT):(c&&c(),a.events.trigger(a.EVENT_XDM_READY)))},{code:a.ERROR_INIT_CONTEXT}),onIframeInsert:a.addExceptionHandling(function(){a.console.log("<async> easy.contextLoader:setTimeout()");a.setTimeout(function(){d||(a.main.initFailure("xdmRemote not initialized at:"+e,a.ERROR_INIT_CONTEXT),f=!0)},a.XDM_INIT_TIMEOUT)},{code:a.ERROR_INIT_CONTEXT}),onError:a.addExceptionHandling(function(){a.main.initFailure("xdmRemote error!",
a.ERROR_INIT_CONTEXT)},{code:a.ERROR_INIT_CONTEXT})})},n=function(b,c,d){var f=function(){a.main.initFailure("initUidAndContext failed",a.ERROR_INIT_CONTEXT)},e=function(){b.getContext(function(b){a.events.trigger(a.EVENT_INIT_CONTEXT,g(b,c))},f)};b.getUid(function(c){c?(a.uid.set(c),e()):(c=a.uid.newUid(d),b.setUid(c,e,f));a.events.trigger(a.EVENT_INIT_UID,c)},f)};return{init:function(g,m){d=m;a.events.isTriggered(a.EVENT_INIT_CONTEXT)?a.main.initFailure("initContext already done",a.ERROR_INIT_CONTEXT):
g.sharedContext?c(m)?a.convert.toSharedContext(b,function(){n(b,g,m)}):l(g,function(){a.convert.toSharedContext(f,function(){n(f,g,m)})}):n(h,g,m)},getContextAccessor:function(){return a.config.sharedContext?c()?b:f:h},useServerApi:c,initUidAndContext:n,getValidContext:g,setUserAgent:function(a){d=a}}}(),a.config={},a.init=function(d){a.main.initStart();if(a.isDisabled())a.console.log("Frosmo is disabled");else if(d=a.utils.extend({},a.defaultConfig,a.config,d),a.config=d,a.api.init(d.api.domain,
d.api.origin),a.checkRequirements()){if(a.versionAtLeast(a.MINIMUM_RULES_VERSION,a.VERSION_RULES)){d.cookieDomain&&a.cookies.setCookieDomain(d.cookieDomain);a.events.trigger(a.EVENT_EASY_CONFIG);a.modules.init(d);a.triggers.init(d.triggers);a.domElements.addStyles(x.easy.styles);a.message.init({positions:d.positions,fallbackUrl:d.fallbackUrl},document.location.href);if(d.requestMessages&&0<d.positions.length)if(d.messagesBeforeContext)a.message.requestMessages();else a.main.onInitSuccess(a.message.requestMessages);
if(d.dataLayer)a.main.onInitSuccess(a.dataLayer.init);a.contextLoader.init(d,navigator.userAgent);a.events.once(a.EVENT_INIT_CONTEXT,function(c){if(c.origin!==d.api.origin)a.main.initFailure("Origin mismatch context: "+c.origin+", config: "+d.api.origin,a.ERROR_ORIGIN_MISMATCH);else a.events.once(a.EVENT_INIT_UID,function(b){a.main.init(c,d,new Date)})});a.events.trigger(a.EVENT_SCRIPT_LOAD);a.domEvents.ready(function(){a.events.trigger(a.EVENT_DOM_READY)});return!0}a.main.initFailure("Version mismatch rule "+
a.MINIMUM_RULES_VERSION+"|"+a.VERSION_RULES,a.ERROR_VERSION_DIFF)}else a.main.initFailure("Check requirements failed",a.ERROR_INIT)},a.handleCurrentPage=function(){a.main.updateBrowserData(window,a.addExceptionHandling(function(){(a.DEVEL||0.01>Math.random())&&a.main.logPageload();a.conversion.handle(document)}))},a.loadScript=function(a,c){var b=document.createElement("script");b.type="text/javascript";b.src=a;b.async=!0;"function"===typeof c&&(b.addEventListener?b.onload=function(){c(b)}:b.onreadystatechange=
function(){("loaded"===b.readyState||"complete"===b.readyState)&&c(b)});document.getElementsByTagName("head")[0].appendChild(b);return b},a.checkRequirements=function(){var d=!0,c=navigator.userAgent,c=c.match("MSIE")&&!c.match(/MSIE (9|1[0-9])/i);a.store.check()||(a.api.error("Local storage not available",a.ERROR_STORAGE),d=!1);c&&(a.api.error("Unsupported browser",a.ERROR_BROWSER_VERSION),d=!1);return d},a.isDisabled=function(){var d=a.utils.parseUri(window.location.href);"off"===d.queryKey.frosmo?
a.cookies.set("frosmo-off",1):"on"===d.queryKey.frosmo&&a.cookies.remove("frosmo-off");return a.cookies.get("frosmo-off")?!0:!1},a.getSite=function(){x.site=x.site||{};return x.site},a.preview=function(){function d(b){"complete"===document.readyState?b():a.domEvents.listen(window,"load",b)}function c(a,b){a&&b&&x.request.jsonp(a,{on:{success:function(a){b(a)}}})}function b(b){b.origin===a.config.api.origin&&f()}function f(){var b=document.createElement("iframe");b.id="frosmo3-debug";b.src="about:blank";
var c=document.createElement("script");c.src=a.config.baseUrl+"preview/PreviewApp.js";b.onload=function(){b.contentDocument.head.appendChild(c)};document.body.appendChild(b)}return{init:function(){d(function(){var d=a.api.getApiUrl("preview");d&&!x.easy.DEVEL&&(d=d.replace(/^([a-z]{3,5}:)?\/\//,"https://admin."));c(d,b)})}}}(),a.modules=function(){function d(c){c.quickMessages&&0<c.quickMessages.length?a.quickMessage.init(c.quickMessages,navigator.userAgent):a.cookies.remove(a.COOKIE_QUICK_CONTEXT)}
return{init:function(c){a.addExceptionHandling(d,{code:a.ERROR_INIT_QUICK_MESSAGE})(c)}}}(),function(){a.convert=function(){var d=function(b,c){var d={pages:"pageVisits"};a.utils.each(c,function(c,f){var n,w,m,r=d[f];if(r&&b[r]&&0!==b[r].length)for(n in c)if(c.hasOwnProperty(n)&&b[r][n]){for(m=0;m<c[n].length;m+=1)w=c[n][m],b[r][w]=a.utils.clone(b[r][n]);delete b[r][n]}})},c=function(b){var c,d=/201[0-9]{5}/g,g=!1;for(c in b)b.hasOwnProperty(c)&&!a.utils.isArray(b[c])&&(b[c]=b[c].match(d)||[],g=!0);
return g};return{convert:function(b){b.VERSION||(b.VERSION=0);return a.versionAtLeast("3.5",a.VERSION)?(d(b,x.easy.config.contextConversionDictionary),c(b.pageVisits),b):a.defaultContext.clone()},toSharedContext:function(b,c){var d=function(){a.store.remove("UID");a.store.remove("context");c()},g=a.store.get("context"),l=a.store.get("UID");l&&g?g.origin!==a.config.api.origin?c():(a.uid.set(l),b.setUid(l,function(){b.setContext(g,d)})):d()},convertLandingPagesAndPagesContext:d,repairInproperHistories:c}}()}(),
function(){var d=0;a.defaultContext={VERSION:"1.0",UID:null,lastPageView:{time:0},lastVisit:{time:0,source:""},pageVisits:{},siteVisits:[],segments:{},referer:{host:null,path:null},landingpage:{host:null,path:null},landingPages:{},linkClicks:{},lastConnectSegments:{time:0},metaCount:{},metaData:{keywords:null,description:null,ogtitle:null,ogdescription:null},country:{time:0,country:"",latitude:0,longitude:0},targetgroups:[],userAgent:"",segmentChanged:0,lastRuleActions:{},site:{},removeFunctions:function(a){delete a.save;
delete a.clone;delete a.removeFunctions;delete a.addFunctions},addFunctions:function(a){a.save=this.save;a.clone=this.clone;a.removeFunctions=this.removeFunctions;a.addFunctions=this.addFunctions},save:function(c){if(a.contextLoader.useServerApi()){if(c&&0===d)return;if(!c){d++;return}d=0}c=a.utils.clone(this);this.removeFunctions(c);a.contextLoader.getContextAccessor().setContext(c)},clone:function(){var c=a.utils.clone(this);this.addFunctions(c);return c},customActions:{},segmentEvents:{enter:{},
leave:{}},conversions:{},loginId:null,eventQueue:[],sessionPathVisits:{},messageDisplayTimes:{},stampedCampaigns:{},removedCampaigns:{}}}(),a.conversions=a.conversions||[],a.products=a.products||[],a.conversion=function(){function d(b){a.utils.each(m,function(c){a.conversionEvaluator.evaluate(c,b)&&a.conversions.push({conversion_id:c.conversionId,conversion_type:c.conversionType,conversion_value:c.conversionValue,conversion_name:c.conversionId})});a.conversion.handleConversionArray()}function c(){var b=
w(a.conversions,r.conversion),c=[],d,f,q;if(0<b.length){for(d=0;d<b.length;d+=1)f=b[d],q={productType:f.conversion_type,productName:f.conversion_name},a.api.setConversionData(f.conversion_id,q,null),a.api.buyProduct(null,f.conversion_type,f.conversion_id,f.conversion_value,null,null,f.payment_channel,f.custom_id,f.transaction_id,f.conversion_quantity),a.console.log('Conversion stored with product type "'+q.productType+'" and product name "'+q.productName+'"'),q=f.conversion_type?f.conversion_type:
"undefined",a.visitsHistory.addConversion(q,f.conversion_id,new Date),c.push(q),c.push(q+" "+f.conversion_id),a.events.trigger(a.EVENT_CONVERSION,f);a.context.save();a.segmentchange.evaluate({conversion:c},new Date)}x.easy.conversions=[]}function b(){var b=w(a.products,r.product),c,d,k;for(c=0;c<b.length;c+=1)k=b[c],d=f(k),a.api.setProductData(b[c].product_id,d,null),a.console.log('Product stored with type "'+d.productType+'" and name "'+d.productName+'"'),a.events.trigger(a.EVENT_PRODUCT_DATA,k);
x.easy.products=[]}function f(b){var c={};a.utils.each({productType:"product_type",productName:"product_name",productPrice:"product_price",productImage:"product_image",productUrl:"product_url",productDiscountPrice:"product_discount_price",productPromotionLabel:"product_promotion_label"},function(a,d){void 0!==b[a]&&(c[d]=b[a])});return c}function h(b){var c;c=a.utils.map(b.querySelectorAll("div.frosmo-conversion"),g);c=w(c,r.conversion);Array.prototype.push.apply(a.conversions,c);b=a.utils.map(b.querySelectorAll("div.frosmo-product"),
l);b=w(b,r.product);Array.prototype.push.apply(a.products,b)}function g(a){return n(a,r.conversion)}function l(a){return n(a,r.product)}function n(b,c){var d={},f,q,g,h,l,p;f=c.required;q=c.optional;l=b.getElementsByTagName("span");for(p=0;p<l.length;p+=1)if(h=l[p].className,a.utils.inArray(f,h)||a.utils.inArray(q,h))g=l[p].innerHTML,(g=g.replace(/^\s+|\s+$/g,""))&&(d[h]=g);for(p=0;p<f.length;p+=1)if(!d.hasOwnProperty(f[p]))return null;return d}function w(b,c){return a.utils.filter(b,function(b){a:{var d=
c.required,f=c.optional,g;if(b){for(g=0;g<d.length;g+=1)if(!b.hasOwnProperty(d[g])){b=null;break a}for(g in b)b.hasOwnProperty(g)&&(!a.utils.inArray(d,g)&&!a.utils.inArray(f,g))&&delete b[g]}else b=null}return b})}var m=[],r={product:{required:"product_type product_id product_name product_price product_image product_url".split(" "),optional:["product_discount_price","product_promotion_label"]},conversion:{required:["conversion_type","conversion_id","conversion_name","conversion_value"],optional:["payment_channel",
"custom_id","transaction_id","conversion_quantity"]}};return{init:function(b){if(!a.utils.isArray(b)||0===b.length)return!1;m=b;a.events.on(a.EVENT_TRIGGER_FIRE,d);return!0},handle:function(f){a.domEvents.ready(function(){d();h(f);b();c()})},evaluateDefinitions:d,parseHtml:h,handleConversionArray:c,handleProductArray:b}}(),function(){a.conversionEvaluator=function(){var d={and:function(){var a;for(a=0;a<arguments.length;a+=1)if(!arguments[a])return!1;return!0},or:function(){var a;for(a=0;a<arguments.length;a+=
1)if(arguments[a])return!0;return!1},matchUrl:function(b,c,d,g){var l=a.main.getCurrentBrowserData().href,l=a.utils.getLocationFromUrl(l);return a.evaluator.matchUrl(b,c,d,g,l)},matchRefererUrl:function(b,c,d){var g=a.main.getCurrentBrowserData().referer,g=a.utils.getLocationFromUrl(g);return a.evaluator.matchUrl(b,c,d,{},g)},matchHtmlElement:function(a,c){c=c||document;return document.querySelector?null!==c.querySelector(a):!1}},c=function(b){if(!a.utils.isArray(b)||0===b.length)throw Error("ruleEvaluator expects an array, given:"+
b);var f=b[0];b=b.slice(1,b.length);var h=[],g;if(!d.hasOwnProperty(f)||"function"!==typeof d[f])throw Error("Not a valid evaluate function: "+f);for(g=0;g<b.length;g++)"[object Array]"===Object.prototype.toString.call(b[g])?h[g]=c(b[g]):h[g]=b[g];return d[f].apply(window,h)};return{evaluate:function(b,d){try{return d?a.conversionEvaluator.evaluateTrigger(b,d)&&a.conversionEvaluator.checkInterval(b):b.rules?c(b.rules)&&a.conversionEvaluator.checkInterval(b):!1}catch(h){if(a.DEVEL)throw h;a.api.error("conversionEvaluator.evaluate(): invalid rules, error:"+
h.message+", rules:"+x.JSON.stringify(b.rules),a.ERROR_CONVERSION_EVALUATOR_EVALUATE);return!1}},checkInterval:function(b){var c=a.visitsHistory.getConversionLastTime(b.conversionType,b.conversionId);return c?c+b.interval<=a.utils.getTimestamp():!0},evaluateTrigger:function(a,c){return a.triggerId===c.id}}}()}(),function(){var d=[],c=[],b=null;a.campaign=a.campaign||{};a.campaign=function(){var f=function(){a.context.stampedCampaigns={};a.context.save()},h=function(b,c){a.api.custom({name:"campaign",
campaign:c.name,type:c.adserver,action:b});a.console.log("campaign stamping, event:"+b+", campaign:"+c.name)},g=function(a){return new Date(parseInt(a.substr(0,4),10),parseInt(a.substr(5,2),10)-1,parseInt(a.substr(8,2),10),0,0,0)},l=function(c,e){var d,f;d=RegExp(/(ipad|iphone|ipod)/i);if(b&&d.test(b))return!1;if(!c.name)throw"No campaign name defined";if(!a.utils.inArray("adtech emediate adwords adform asx doubleclick facebook".split(" "),c.adserver))throw'Invalid campaign type "'+c.adserver+'" in '+
c.name;if(!c.startDate||!c.endDate)throw"No start or end date defined for campaign ("+c.name+")";if(!c.url)throw"No api url defined for campaign ("+c.name+")";if(!c.targetGroups||0===c.targetGroups.length)return!1;d=g(c.startDate);f=g(c.endDate);f.setHours(23);f.setMinutes(59);f.setSeconds(59);return d<=e&&e<=f},n=function(b,c){c?(a.context.stampedCampaigns[b]=1,delete a.context.removedCampaigns[b]):(delete a.context.stampedCampaigns[b],a.context.removedCampaigns[b]=1)},w=function(a){var b=new Image;
b.src=a;c.push(b)},m=function(a,b){var c;switch(a.adserver){case "adform":case "doubleclick":case "emediate":return w(a.url);case "adtech":return c="https://secserv.adtech.de/"+a.url.replace(/^\//g,""),w(c);case "adwords":return c="tggp="+b.join(",")+";frma="+a.name,c=a.url+encodeURIComponent(c),w(c);case "facebook":return c=a.url+"&cd[frma]="+a.name,w(c);case "asx":return w(r(a.url));default:throw Error("enterCampaign(): invalid campaign.adserver:"+a.adserver);}},r=function(a){var b=encodeURIComponent(window.location.href),
c=Math.random().toString().substring(2,11);return a+"&rnd="+c+"&ref="+b},u=function(a){if(!a.removeUrl)return!1;a=r(a.removeUrl);w(a);return!0},e=function(b){a.api.clickMessage(null,b,1);a.console.log("External campaign logged (messageId: "+b+")");a.events.trigger(a.EVENT_CAMPAIGN_CLICK,b)},s=function(b,c){var d=a.utils.getLocationFromUrl(c),f=function(){return!0};a.utils.each(b,function(b,c){a.evaluator.matchUrl(f,"",b,{},d)&&e(c)})},k=function(b){b=a.utils.getLocationFromUrl(b);b=parseInt(b.queryVariables.ftid,
10);0<b&&e(b)};return{init:function(c,e){var g=window.location.href;a.events.on(a.EVENT_VISIT,f);e||(e=window.navigator.userAgent);b=e;d=c.campaigns||[];s(c.campaignElements||{},g);k(g)},clearStampedList:f,stampUser:function(b){var c=a.context.stampedCampaigns,e=a.context.removedCampaigns;a.utils.each(d,function(d){var f=!1,k=[],g;if(l(d,b)&&(k=a.utils.filter(d.targetGroups,function(b){return a.utils.inArray(a.context.targetgroups,b)}),f=0<k.length,g=Boolean(c[d.name]),f!==g))if(f)m(d,k),h(e[d.name]?
"reenter":"enter",d),n(d.name,!0),a.events.trigger(a.EVENT_CAMPAIGN_STAMP,d);else{a:{switch(d.adserver){case "asx":f=u(d);break a}f=!1}f&&(h("leave",d),n(d.name,!1),a.events.trigger(a.EVENT_CAMPAIGN_UNSTAMP,d))}});a.context.save()},trackCampaignElements:s,setRequestImageSpy:function(a){w=a},trackFtidParam:k}}()}(),function(){a.message=function(){var d=[],c,b,f=0,h=function(b){return a.utils.map(b,function(b){return new a.positionData(b.position,b.urlMatch,b.elementId,b.method,b.renderer||null,b.animation||
null,b.cssClasses||null,b.cssText||null,c)})},g=function(b){var c=a.utils.filter(d,function(a){return a.position===b});return 0<c.length?c[c.length-1]:null},l=function(b){return a.utils.map(n(b),function(a){return{position:a.position}})},n=function(b){return!c?[]:a.utils.filter(b||d,function(a){return a.isMatchingUrl(c)})},w=function(b){var c=[],e;a.utils.each(b,function(a){a.message&&a.message.id&&(a.isPopup()?e?a.priorityLevel<e.priorityLevel&&(e=a):e=a:c.push(a))});e&&c.push(e);return c},m=function(b){return function(c){var e=
[],d;a.events.trigger(a.EVENT_MESSAGE_RECEIVE);a.events.trigger(a.EVENT_MESSAGE_SUCCESS);c.messages&&0<c.messages.length&&(a.utils.each(b,function(a,b){a.message=c.messages[b];e.push(a)}),d=w(e),a.messageShow.showMessage(d));k()}},r=function(c){b&&(x.request.jsonp(b,{jsonpCallback:"fallback",on:{success:c}}),a.DEVEL||(c=new Image,c.src="//inpref-fallback.s3.amazonaws.com/empty.gif",[].push(c)))},u=function(b){return function(c){var e={messages:[]};a.utils.each(b,function(a){c[a.position]?e.messages.push(c[a.position]):
e.messages.push({})});m(b)(e)}},e=function(){var b=a.store.get("message");if(b&&b.failures)return b.failures},s=function(b){a.store.set("message",{failures:b})},k=function(){a.utils.each(d,function(a){a.show()})},q=function(b){return function(){a.events.trigger(a.EVENT_MESSAGE_RECEIVE);a.events.trigger(a.EVENT_MESSAGE_FAILURE);var c;c=e()||[];var d=(new Date).getTime();c=10===c.length&&3E5>d-c[0]?!0:!1;c&&r(u(b));c=e()||[];d=(new Date).getTime();for(c.push(d);10<c.length;)c.shift();s(c);k()}},y=function(b,
c){return function(e){a.main.onInitSuccess(function(){c&&c!==f?a.api.error("message.safeRequest(): invalid init id! message.init has been called after request",a.ERROR_MESSAGE_RESPONSE):a.addExceptionHandling(b)(e)})}},z=function(b){b=b||{};a.events.trigger(a.EVENT_MESSAGE_REQUEST);(function(){var c,e=function(){var b=[];a.utils.each(k.segments,function(a,c){1===a&&b.push(c.replace("sgmt_",""))});return b.join(".")},d=function(){var b=[];a.utils.each(k.targetgroups,function(a){b.push(a.replace("tggp_",
""))});return b.join(".")},k=a.context||function(){var b=a.defaultContext.clone(),c=a.store.get("frosmo_segments");b.targetgroups=a.utils.getTargetGroupsFromCookie();c&&(b.segments=c);return b}();c=a.uid.get()||a.store.get("UID");var g=k.lastVisit.source||a.store.get("source"),s=b.timeout||5E3,r=b.positions?n(h(b.positions)):n();if(!c&&!a.main.isInitialized())a.main.onInitSuccess(function(){z(s)});else 0===r.length?a.console.log("message request is not made because there are no active positions"):
(c={origin:a.config.api.origin,cid:c,version:"3.0",method:"multifetch",multifetch:x.JSON.stringify(l(r)),states:x.JSON.stringify(a.states.getAll())},k.targetgroups&&(c.targetGroups=d()),k.segments&&(c.segments=e()),g&&(c.source=g),x.request.jsonp(a.api.getApiUrl("message"),{params:c,timeout:s,on:{timeout:y(q(r),f),failure:y(q(r),f),success:y(m(r),f)}}))})()},A=function(b){var c;if(b)if(b=b.split(":"),3!==b.length)a.console.error("easy.message: Wrong frosmo_preview format. Should be frosmo_preview=positionId:messageId:revisionId");
else{for(c=b.length-1;0<=c;c-=1)if(!a.utils.isPositiveInteger(b[c])){a.console.error("easy.message: Wrong frosmo_preview param: "+b[c]+". Should be positive integer");return}return{positionId:parseInt(b[0],10),messageId:parseInt(b[1],10),revisionId:parseInt(b[2],10)}}else a.console.error("easy.message: No preview param")};return{init:function(e,g){var s=e&&e.positions?e.positions:a.config.positions;b=e&&e.fallbackUrl?e.fallbackUrl:a.config.fallbackUrl;c=g;d=h(s);f+=1;a.events.trigger(a.EVENT_MESSAGE_INIT);
a.events.once(a.EVENT_INIT_FAILURE,k)},requestMessages:function(b){var e;e=(e=a.utils.getLocationFromUrl(c))&&e.params?e.params.frosmo_preview:void 0;a.messageShow.clearMessageTimeouts();e?a.message.requestPreview(e):z(b)},filterPositionData:w,requestFallbackMessages:r,getActivePositions:l,displayHiddenPositions:k,getPositions:function(){return d},testRequestMessagesFailure:function(a){var b=q;q=a;return b},testRequestMessagesSuccess:function(a){var b=m;m=a;return b},setFailures:s,requestPreview:function(b){var c,
e,d=function(a){a=x.easy.api.getApiUrl(a);x.easy.DEVEL||(a=a.replace(/^([a-z]{3,5}:)?\/\//,"https://admin."));return a};if(c=A(b))b=a.utils.extend({origin:a.config.api.origin,method:"preview"},c),e=function(b){var e=g(c.positionId);e?(e.message=b.content,a.api.setCallUrl(function(){}),a.messageShow.showMessage([e],{trackMessage:!1})):a.console.error("easy.message: No position in config for "+c.positionId)},x.request.jsonp(d("message"),{params:b,on:{success:y(e,f)}})}}}()}(),function(){var d={maxcalls:100,
interval:100,trackMessage:!0};a.messageShow=function(){var c={},b=0,f,h=[],g=function(b){b=b||{};return a.utils.extend(a.utils.clone(d),b)},l=function(b,c){var e=b.getElementsByTagName("a"),d=b.getElementsByTagName("area"),f=b.getElementsByTagName("form"),g=function(a){return/(frosmoPopupClose|close|fb_button)/i.exec(a.className)},h=function(a,b,e,d,f){var g;e=e||window.event;f=f||"onclick";c(e);(function(){"function"===typeof d&&(g=d.call(a,e),!1===g&&!e.preventDefault&&(e.returnValue=!1));b[f]=
"function"===typeof d?d:function(){}})();return g};a.domEvents.listen(b,"click",'a, input[type="submit"], input[type="image"], input[type="button"], button, area, .frosmo-click',function(b,e){var d=e.getAttribute("href"),f=e.getAttribute("target"),s=function(){a.console.log("Redirecting page");("_top"===f?window.top:"_parent"===f?window.parent:window).location.href=d};g(e)||(c(b),d&&"_blank"!==f&&!a.domEvents.isDefaultPrevented(b)&&(b.preventDefault?b.preventDefault():b.returnValue=!1,a.utils.waitFor(20,
500,function(){a.console.log("checking events queue");if(0===a.context.eventQueue.length)return s(),!0},function(){a.console.log("redirect, event queue not empty");s()})))});a.utils.each(e,function(a){var b=a.onclick;g(a)||(a.onclick=function(c){return h(this,a,c,b)})});a.utils.each(d,function(a){var b=a.onclick;g(a)||(a.onclick=function(c){return h(this,a,c,b)})});a.utils.each(f,function(a){var b=a.onsubmit;g(a)||(a.onsubmit=function(c){return h(this,a,c,b,"onsubmit")})})},n=function(c,e,d){var f,
g=function(b){var c="li span p tr td th".split(" ");return b&&b.tagName&&a.utils.inArray(c,b.tagName.toLowerCase())?document.createElement(b.tagName):document.createElement("div")};switch(e){case "renew":f=g(c);c.parentNode.insertBefore(f,c);c.parentNode.removeChild(c);break;case "before":f=g(c);c.parentNode.insertBefore(f,c);break;case "after":for(e=c.nextSibling;e&&1!==e.nodeType;)e=e.nextSibling;f=g(e);c.parentNode.insertBefore(f,c.nextSibling);break;case "prepend":for(e=c.firstChild;e&&1!==e.nodeType;)e=
e.nextSibling;f=g(e);c.insertBefore(f,c.firstChild);break;case "append":for(e=c.lastChild;e&&1!==e.nodeType;)e=e.previousSibling;f=g(e);c.appendChild(f)}b+=1;f.id="frosmo_message_element_"+b;a.utils.addClassName(f,d?"frosmo_position_"+d:"");return f},w=function(b){var c,e=[];if(b.isPopup())return e.push(x.easy.popup.create()),e;c=b.getElements();if(0===c.length)return e;"replace"===b.method||"hide"===b.method||"renew"===b.method&&"hidden"===b.message.revisionType?e=c:"hidden"===b.message.revisionType?
e.push(document.createElement("div")):a.utils.each(c,function(c){var d;a:{d=b.position;var f,g;switch(b.method){case "renew":d=void 0;break a;case "before":f=c.previousSibling;break;case "after":f=c.nextSibling;break;case "prepend":f=0<c.childNodes.length?c.childNodes[0]:void 0;break;case "append":f=0<c.childNodes.length?c.childNodes[c.childNodes.length-1]:void 0}g=a.utils.getClassNames(f);d=a.utils.inArray(g,d?"frosmo_position_"+d:"")?f:void 0}d||(d=n(c,b.method,b.position));e.push(d)});a.utils.each(e,
function(a){var c;b.cssClasses&&(a.className+=" "+b.cssClasses);b.cssText&&(c=a.style.cssText||"",!c||/;\s*$/.test(c)?a.style.cssText=c+b.cssText:a.style.cssText+=";"+b.cssText)});return e},m=function(b,c){var e=c,d=[],f=function(a){var b=RegExp("^<"+a+'[^>]+src="(.*?)"'),c=RegExp("^<"+a+"[^>]+src='(.*?)'");e=e.replace(RegExp("<"+a+"\\b[^>]*>([\\s\\S]*?)<\\/"+a+">","gim"),function(e,f){var g=e.match(b)||e.match(c);g&&(g=g[1]);d.push({type:a,content:f||g,isContent:f?!0:!1});return""})};f("script");
f("style");b.innerHTML=e;(function(){a.utils.each(d,function(b){switch(b.type){case "script":a.domElements.addScriptTag(b.content,b.isContent);break;case "style":a.domElements.addStyles(b.content)}})})()},r=function(b,d){var f=b.message,r,u=function(){var g=[],h=function(b){l(b,function(){a.utils.inArray(g,f.id)||(g.push(f.id),a.api.clickMessage(null,f.id,f.revision),a.events.trigger(a.EVENT_MESSAGE_CLICK,f),a.messageTrueDisplay.logInstantly(f.id,f.revision))})},u=function(c){a.main.onInitSuccess(function(){var e=
r[0];f.options.maxDisplayTimes&&(a.context.messageDisplayTimes[f.id]=a.context.messageDisplayTimes[f.id]?a.context.messageDisplayTimes[f.id]+1:1,a.context.save());if(d.trackMessage&&(a.api.showMessage(null,f.id,f.revision),a.events.trigger(a.EVENT_MESSAGE_SHOW,f),!c||c&&a.config.hiddenMessageClickTracking&&("replace"===b.method||"renew"===b.method)))h(e),a.messageTrueDisplay.start(f,b,e)})},n=function(a,c,e,d){return c.call(a,b,f,e,function(){u(d)})},w=function(b){a.utils.addClassName(b,"frosmo_inline");
f.id&&a.utils.addClassName(b,"frosmo_message_"+f.id)};"hidden"===f.revisionType?"string"===typeof b.renderer&&c[b.renderer+".hidden"]?n(this,c[b.renderer+".hidden"],r[0],!0):u(!0):(f.content=e(f,!d.trackMessage),f.content&&(a.utils.each(r,function(e){var d=!1;b.isPopup()?(x.easy.popup.show(f.content),u()):"function"===typeof b.renderer?n(this,b.renderer,e):"string"===typeof b.renderer&&c[b.renderer]?n(this,c[b.renderer],e):b.animation&&window.jQuery&&!b.hidden&&a.messageAnimation.isValidAnimation(b.animation)?
(w(e),a.messageAnimation.animate(f,e,b.animation,function(){d||(u(),d=!0)})||(a.api.error("Animation is not working on position (id: "+b.position+")",a.ERROR_JQUERY_UI_MISSING),m(e,f.content),b.show(),u())):(w(e),m(e,f.content),b.show(),u())}),a.uihooks.initLinks(a.config.links),a.uihooks.initForms(a.config.forms)))};d=g(d);r=w(b);if(0>=r.length||f.options.maxDisplayTimes&&a.context.messageDisplayTimes[f.id]>=f.options.maxDisplayTimes)return!1;0<f.options.displayDelay?h.push(a.setTimeout(u,1E3*f.options.displayDelay)):
u();return!0},u=function(b){b=b.split(".");var c=function(b,e){var d=e.shift();if(d){if(Object.prototype.hasOwnProperty.call(b,d))return c(b[d],e)}else if(b!==window&&a.utils.isObject(b)&&!a.utils.isEmpty(b))return b};"window"===b[0]&&b.shift();return c(window,b)},e=function(b){var c=b.content,e=b.template;if(!e||!e.active||!a.template)return c;if(!e.variable)return a.api.error("easy.messageShow.renderTemplate Missing template.variable",a.ERROR_TEMPLATE_RENDER),null;if(a.config.templates&&a.utils.isObject(a.config.templates)&&
-1<e.variable.indexOf(" EXPORT"))if(a.config.templates[e.variable])c=a.template.render(a.config.templates[e.variable],e.defaults);else return a.api.error("easy.messageShow.renderTemplate missing temaplate in easy.config.templates",a.ERROR_TEMPLATE_RENDER),null;else c=u(e.variable),!c&&!a.utils.isEmpty(e.defaults)&&(c=e.defaults),c=c?a.template.render(b.content,c):null;return c};return{clearMessageTimeouts:function(){for(var b=0,b=0;b<h.length;b++)window.clearTimeout(h[b]);f&&(window.clearTimeout(f),
f=null,a.console.log("messageShow: Cleared renderLoop timeout."));h=[]},showMessage:function(b,c){var e=g(c),d=b,h=0,l=function(){var b,c=[];h+=1;for(b=d.pop();b;)b.isPopup()?a.domEvents.ready(function(a,b){return function(){r(a,b)}}(b,e)):r(b,e)||c.push(b),b=d.pop();d=c;0<d.length?h<e.maxcalls?f=a.setTimeout(l,e.interval):(f=null,a.events.trigger(a.EVENT_MESSAGESHOW_COMPLETE),a.console.debug("messageShow.showMessage: max calls reached",d)):(f=null,a.events.trigger(a.EVENT_MESSAGESHOW_COMPLETE))};
l()},renderPositionData:r,addCustomRenderer:function(b,e){if(!b)return a.api.error('Invalid name for customRenderer: "'+b+'"'),!1;if(c[b])return a.api.error('CustomRenderer "'+b+'" is already defined'),!1;if("function"!==typeof e)return a.api.error("Custom renderer is not a function! ("+e+")"),!1;c[b]=e;return!0},insertHtml:m,renderTemplate:e,extractTemplateVariable:u}}()}(),function(){a.messageAnimation=function(){var a={fadein:1,fadeout:1,blind:1,slide:1},c=function(a,b,c,d){var n=b.css("position")||
"",w=b[0].style.height,m=b.height(),r=jQuery("<div />"),u=jQuery("<div />"),e,s;switch(c){case "fadein":e=u;s="show";break;case "fadeout":e=r,s="fadeOut"}b.css({position:"relative",height:m});r.css({position:"absolute",left:"0px","z-index":"fadeout"===c?"2":"1"});u.css({position:"absolute","z-index":"fadeout"===c?"1":"2"});"fadein"===c&&u.css({display:"none"});b.children().detach().appendTo(r);jQuery(a.content).appendTo(u);r.appendTo(b);u.appendTo(b);e[s](1E3*(a.options.displayDelay||1),function(){r.remove();
u.css({position:""});b.css({position:n,height:w});"function"===typeof d&&d()});return!0},b=function(a,b,c,d){var n=jQuery(a.content);n.css({display:"none"});b.html(n);try{n.show(c,{},1E3*(a.options.displayDelay||1),d)}catch(w){return!1}return!0};return{isValidAnimation:function(b){return a.hasOwnProperty(b)},animate:function(a,d,g,l){d=jQuery(d);if(!d||1!==d.length)return x.console.error("Container for inline message missing, can NOT display message!"),!1;switch(g){case "fadein":case "fadeout":return c(a,
d,g,l);default:return b(a,d,g,function(){"function"===typeof l&&l()})}}}}()}(),function(){a.messageTrueDisplay=function(){var d=function(b){var c=b.getClientRects(),d=!0;a.utils.each(c,function(a){var c=(a.left+a.right)/2;a=(a.top+a.bottom)/2;var e;if(document.elementFromPoint){for(c=document.elementFromPoint(c,a);c&&c.parentNode&&1===c.nodeType;)c===b?(e=!0,c=null):c=c.parentNode;e||(d=!1)}});return d},c=function(a){if(!document.body.contains(a))return{};var b=a.getBoundingClientRect?a.getBoundingClientRect():
null,c=function(){var a=1,b;document.body.getBoundingClientRect&&(a=document.body.getBoundingClientRect(),a=a.right-a.left,b=document.body.offsetWidth,a=Math.round(100*(a/b))/100);return a},d=function(){for(var b=a.offsetTop,c=a.offsetLeft,e=a.offsetWidth,d=a.offsetHeight;a.offsetParent;)a=a.offsetParent,b+=a.offsetTop,c+=a.offsetLeft;return{top:b-window.pageYOffset,left:c-window.pageXOffset,right:c+e-window.pageXOffset,bottom:b+d-window.pageXOffset}};b?"microsoft internet explorer"===navigator.appName.toLowerCase()&&
(b={left:b.left,right:b.right,top:b.top,bottom:b.bottom,width:b.width||a.offsetWidth,height:b.height||a.offsetHeight},b.left-=document.documentElement.clientLeft,b.top-=document.documentElement.clientTop,c=c(),1!==c&&(b.left=Math.round(b.left/c),b.top=Math.round(b.top/c),b.bottom=Math.round(b.bottom/c),b.right=Math.round(b.right/c))):b=d();return b},b=function(a,b){var c=document.documentElement.clientHeight,d=document.documentElement.clientWidth,f=0<=b.top&&0<=b.left&&b.bottom<=c&&b.right<=d,g,h,
l,r;if((300<b.width||300<b.height)&&!f)g=b.height,h=b.width,l=b.top,c-=b.bottom,r=b.left,d-=b.right,0>l&&0>c?g=g+l+c:0>c?g+=c:0>l&&(g+=l),0>r&&0>d?h=h+r+d:0>r?h+=r:0>d&&(h+=d),h*g>=0.75*b.width*b.height&&(f=!0);return f},f=function(a,b){return"hidden"!==a.style.visibility&&"none"!==a.style.display&&(0<b.width||0<b.height)},h=function(g){if(!g)return a.console.log("messageTrueDisplay.isVisible(): no element"),!1;var e=c(g),h=f(g,e),e=b(g,e);g=d(g);var k="styleVisible: "+h+", inViewport: "+e+", onTop:"+
g;a.store.get("frosmo_debug_trueDisplay")&&a.console.log(k);return h&&e&&g},g={},l={},n=function(b,c){var d=b+"-"+c;l[d]||(a.api.trueDisplay(null,b,c),l[d]=1)},w=function(b){h(b.element)?b.timerActive||(b.timerActive=!0,b.timerId=a.setTimeout(function(){var c=b.message.id+"-"+b.message.revision;l[c]||(a.api.trueDisplay(null,b.message.id,b.message.revision),l[c]=1,a.events.trigger(a.EVENT_MESSAGE_TRUE_DISPLAY,b.message));b.timerId&&window.clearTimeout(b.timerId);b.timerActive=!1;delete g[b.positionData.position];
b.onScroll&&(window.detachEvent?window.detachEvent("onscroll",b.onScroll):window.removeEventListener("scroll",b.onScroll,!1))},3E3)):(b.timerActive=!1,b.timerId&&window.clearTimeout(b.timerId))},m=function(a){var b=function(){w(a)};a.onScroll=b;window.attachEvent?window.attachEvent("onscroll",b):window.addEventListener("scroll",b,!1)},r=function(){a.utils.each(g,function(a){w(a)})};return{start:function(b,c,d){b&&(c&&d)&&(c.isPopup()?(n(b.id,b.revision),a.events.trigger(a.EVENT_MESSAGE_TRUE_DISPLAY,
b)):(g[c.position]={message:b,positionData:c,element:d,timerActive:!1,timerId:null},m(g[c.position]),r()))},checkAll:r,getBoundingClientRect:c,isStyleVisible:f,isInViewPort:b,isVisible:h,logInstantly:n,clearDisplayedMessageList:function(){l={}}}}()}(),function(){a.positionData=function(a,c,b,f,h,g,l,n,w){if("undefined"===typeof a)throw"positionData:: Missing position '"+a+"'";if(!b)throw"positionData:: Missing elementId '"+a+"'";this.position=a;this.urlMatch=c;this.elementId=b;this.method=f;this.renderer=
h;this.animation=g;this.cssClasses=l;this.cssText=n;this.hidden=!1;this._setPriorityLevel();"hide"===this.method&&this.isMatchingUrl(w)&&this.hideIfNotVisible()};a.positionData.prototype={METHOD_HIDE:"hide",METHOD_REPLACE:"replace",METHOD_RENEW:"renew",METHOD_BEFORE:"before",METHOD_AFTER:"after",METHOD_PREPEND:"prepend",METHOD_APPEND:"append",HIDDEN_CLASS:"frosmo-message-hidden",isMatchingUrl:function(d){var c=a.utils.getLocationFromUrl(d),b,f,h,g,l=!1;d=this.urlMatch;if(!d)return!0;a.utils.each(d,
function(d){b=a.evaluator.getMatcherFunction(d[0]);f=d[1];h=d[2]||{};g=d[3]||{};a.evaluator.matchUrl(b,f,h,g,c)&&(l=!0)});return l},isPopup:function(){return"popup"===this.elementId},_setPriorityLevel:function(){var d={matchExact:0,matchBegins:1,matchRegex:2,undefined:9999},c;this.urlMatch&&0<this.urlMatch.length?a.utils.each(this.urlMatch,function(a){a=d[a[0]];void 0===a&&(a=d.undefined);void 0!==c?a<c&&(c=a):c=a}):c=d.undefined;this.priorityLevel=c},hasJQuerySelector:function(){return/^\$/.test(this.elementId)},
getElementSelector:function(){return this.hasJQuerySelector()?this.elementId.substring(1):"#"+this.elementId},hideIfNotVisible:function(){var d=this,c=function(b){var c=!1;a.utils.each(b,function(b){0<a.domElements.visibility(b)&&(c=!0)});c||(a.domElements.addStyles(d.getElementSelector()+" { visibility: hidden !important; }"),d.hidden=!0)},b=function(b){a.utils.each(b,function(b){0===a.domElements.visibility(b)&&(a.utils.addClassName(b,d.HIDDEN_CLASS),d.hidden=!0)})};a.domElements.isValidCssSelector(this.getElementSelector())?
c(a.domElements.selector(this.getElementSelector())):a.utils.waitFor(20,2E3,function(){var a=window.jQuery?window.jQuery(d.getElementSelector()):null;if(a&&0<a.length)return b(a),!0})},show:function(){"hide"===this.method&&this.hidden&&(a.domElements.isValidCssSelector(this.getElementSelector())?a.domElements.removeStyles(this.getElementSelector()):window.jQuery&&window.jQuery(this.getElementSelector()).removeClass(this.HIDDEN_CLASS),this.hidden=!1)},getElements:function(){return a.domElements.selector(this.getElementSelector())}}}(),
function(){a.popup=function(){var d=function(a,b){if(a.getElementsByClassName)return a.getElementsByClassName(b);var c=[],d=a.getElementsByTagName("*"),f=RegExp("(^|\\s)"+b+"(\\s|$)"),g;for(g=0;g<d.length;g+=1)f.test(d[g].className)&&c.push(d[g]);return c},c,b,f=function(){var a=document.getElementById("frosmoPopup"),d=document.body,f=document.getElementsByTagName("head")[0];if(!d||!f)throw Error("No body or head found from document");if(a)return a;a=document.createElement("div");f=document.createElement("div");
a.setAttribute("id","frosmoPopupBackground");f.setAttribute("id","frosmoPopup");d.appendChild(f);d.appendChild(a);c=f;b=a;return f},h=function(){c.style.display="none";b.style.display="none";a.messageTrueDisplay.checkAll()},g=function(){var b=d(c,"frosmoPopupClose"),f=document.getElementById("frosmoPopupBackground");b&&0<b.length&&a.utils.each(b,function(a){a.onclick=h});f.onclick=h};return{create:f,show:function(h){(!c||!b)&&f();var n=function(){var a=document.documentElement.clientWidth,b=document.documentElement.clientHeight,
f=d(c,"frosmoPopupContent")[0];c.className=640>a?"frosmoPopupMaxWidth640":"";f&&(f.style.maxHeight=640>b?"200px":"400px")};a.messageShow.insertHtml(c,h);g();c.style.display="block";b.style.display="block";window.navigator.appVersion.match(/MSIE\s[7-8]/)&&(window.onresize=n,n())},hide:h}}()}(),function(){var d={day:function(b,c,d){var g=!1;a.utils.each(c[b],function(a){a===d&&(g=!0)});return g},visit:function(b){return a.context.sessionPathVisits[b]}},c=function(a){for(var c in d)if(a===c)return!0;
return!1};a.visitsHistory=function(){var b=function(a,b,c){var d,f;if(!a||"string"===typeof a)return[b];d=[];d.push(b);for(b=0;b<a.length&&!(f=a[b],8===f.length&&d.push(f),d.length>=c);b+=1);return d},f=function(f,g,h){var m=[];a.utils.each(g,function(g,n){var e,s,k,q;if(null!==g&&(!c(g[4])||!d[g[4]](n,a.context.pageVisits,h)))e=g[2]||{},s=a.evaluator.getMatcherFunction(g[0]),k=g[1],q=a.config.anchorEnabled&&g[3]?g[3]:{},a.evaluator.matchUrl(s,k,e,q,f)&&(a.context.pageVisits[n]=b(a.context.pageVisits[n],
h,20),m.push(n),a.context.sessionPathVisits[n]=1)});return m},h=function(f,g,h,m){var r=!1,u=[],r=a.convert.repairInproperHistories(m);a.utils.each(g,function(e,g){var k,n,y,x,A;if(null!==e&&(k=e[2]||{},n=a.evaluator.getMatcherFunction(e[0]),y=e[1],x=a.config.anchorEnabled&&e[3]?e[3]:{},A=c(e[4])?e[4]:!1,a.evaluator.matchUrl(n,y,k,x,f)&&((n=a.config.sharedPages[g])?(r=!0,k=m):(k=a.context.pageVisits,n=g),!A||!d[A](n,k,h))))k[n]=b(k[n],h,20),u.push(n),a.context.sessionPathVisits[g]=1});r&&a.sharedPagesRpc.set("sharedPages",
m);a.sharedContext.pageVisits=a.utils.clone(m);return u},g=function(a,b){return a+"\n"+b};return{addPageVisit:function(b,c,d,g){var r,u=a.utils.getDateInContextFormat(d),e=a.utils.getLocationFromUrl(b.href);a.config.sharedPages?a.sharedPagesRpc.get("sharedPages",function(a){r=h(e,c,u,a||{});g(r)},function(){r=f(e,c,u);g(r)}):(r=f(e,c,u),g(r))},addSiteVisit:function(c){c=a.utils.getDateInContextFormat(c);a.context.siteVisits=b(a.context.siteVisits,c,20)},shiftDateArray:b,addCustomAction:function(c,
d){var f=a.utils.getDateInContextFormat(d);a.context.customActions[c]=b(a.context.customActions[c],f,20)},addMetaCount:function(c,d){var f=a.utils.getDateInContextFormat(d);a.context.metaCount[c]=b(a.context.metaCount[c],f,20)},addConversion:function(c,d,f){var h=a.utils.getDateInContextFormat(f),r;a.context.conversions[c]=b(a.context.conversions[c],h,20);d&&(r=g(c,d),c=g(c,d)+"\nlast",a.context.conversions[r]=b(a.context.conversions[d],h,20),a.context.conversions[c]=a.utils.getTimestamp(f))},getConversionIdKey:g,
getConversionLastTime:function(b,c){var d=g(b,c)+"\nlast";return a.context.conversions[d]}}}()}(),x.easy.styles="#frosmoPopup{display:none;position:fixed;top:10%;background-color:#fff;-moz-opacity:1;opacity:1;filter:alpha(opacity=100);border:1px solid #000;z-index:1002;-moz-box-shadow:0 0 30px #000;-webkit-box-shadow:0 0 30px #000;border-radius:7px;box-shadow:0 0 30px #000;width:560px;margin-left:-280px;left:50%;font-family:\"Helvetica Neue\",Helvetica,Arial,sans-serif;padding:10px 15px;overflow:auto}.frosmoPopupHeader{background-repeat:no-repeat}.frosmoPopupHeader h1{margin:10px}.frosmoPopupHeader .frosmoPopupClose{display:inline-block;float:right;background:transparent;border:none;font-size:20px;font-weight:bold;line-height:20px;cursor:pointer;margin:0;opacity:.4}.frosmoPopupHeader .frosmoPopupClose:hover{opacity:.8}.frosmoPopupContent{clear:both;position:relative;max-height:400px;overflow:auto;margin-bottom:15px;padding:0 10px 10px}.frosmoPopupFooter{display:block;text-align:right}.frosmoPopupFooter button{background:#ccc;border:none;padding:5px 10px;cursor:pointer;border-radius:4px}.frosmoPopupFooter button:hover{background:#aaa}#frosmoPopupBackground{display:none;position:fixed;top:0;left:0;width:100%;height:100%;background-color:#000;z-index:1001;-moz-opacity:.7;opacity:.70;filter:alpha(opacity=70);margin:0;padding:0}#frosmoPopup.frosmoPopupMaxWidth640{width:auto;left:auto;margin-left:10px;margin-right:10px}@media(max-width:640px){#frosmoPopup{width:auto;left:auto;margin-left:10px;margin-right:10px}}@media(max-height:640px){.frosmoPopupContent{max-height:200px}}@media(max-height:840px){.frosmoPopupContent{max-height:400px}}@media(min-height:841px){.frosmoPopupContent{max-height:600px}}#frosmoSurvey{background:#fff;font-size:14px;margin:0;padding:0;text-align:center}#frosmoSurveyLanguages{background:#fff;margin:0;padding:0;text-align:right}#frosmoSurveyLanguages a{background:#fff;color:gray;font-size:12px;font-weight:normal;font-style:normal;margin:0 0 0 6px;padding:0;text-decoration:underline}#frosmoSurveyLanguages a.frosmoSurveyLanguageActive{font-weight:bold;text-decoration:none}#frosmoSurveyTitle{background:#fff;color:#333;font-size:21px;font-weight:bold;font-style:normal;margin:20px 0;padding:0}#frosmoSurveyGenders{background:#fff;margin:0 0 20px 0;padding:0}#frosmoSurveyGenders button{font-weight:normal;font-style:normal}.frosmoBtn{display:inline-block;*display:inline;*zoom:1;padding:4px 12px;margin-bottom:0;font-size:14px;line-height:24px;text-align:center;vertical-align:middle;cursor:pointer;color:#333;text-shadow:0 1px 1px rgba(255,255,255,0.75);background-color:#f5f5f5;background-image:-moz-linear-gradient(top,#fff,#e6e6e6);background-image:-webkit-gradient(linear,0 0,0 100%,from(#fff),to(#e6e6e6));background-image:-webkit-linear-gradient(top,#fff,#e6e6e6);background-image:-o-linear-gradient(top,#fff,#e6e6e6);background-image:linear-gradient(to bottom,#fff,#e6e6e6);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffffff',endColorstr='#ffe6e6e6',GradientType=0);border-color:#e6e6e6 #e6e6e6 #bfbfbf;border-color:rgba(0,0,0,0.1) rgba(0,0,0,0.1) rgba(0,0,0,0.25);*background-color:#e6e6e6;filter:progid:DXImageTransform.Microsoft.gradient(enabled = false);border:1px solid #bbb;*border:0;border-bottom-color:#a2a2a2;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;*margin-left:.3em;-webkit-box-shadow:inset 0 1px 0 rgba(255,255,255,.2),0 1px 2px rgba(0,0,0,.05);-moz-box-shadow:inset 0 1px 0 rgba(255,255,255,.2),0 1px 2px rgba(0,0,0,.05);box-shadow:inset 0 1px 0 rgba(255,255,255,.2),0 1px 2px rgba(0,0,0,.05)}.frosmoBtn:hover,.frosmoBtn:active,.frosmoBtn.active,.frosmoBtn.disabled,.frosmoBtn[disabled]{color:#333;background-color:#e6e6e6;*background-color:#d9d9d9}.frosmoBtn:active,.frosmoBtn.active{background-color:#ccc 9}.frosmoBtn:first-child{*margin-left:0}.frosmoBtn:hover{color:#333;text-decoration:none;background-position:0 -15px;-webkit-transition:background-position .1s linear;-moz-transition:background-position .1s linear;-o-transition:background-position .1s linear;transition:background-position .1s linear}.frosmoBtn:focus{outline:thin dotted #333;outline:5px auto -webkit-focus-ring-color;outline-offset:-2px}.frosmoBtn.active,.frosmoBtn:active{background-image:none;outline:0;-webkit-box-shadow:inset 0 2px 4px rgba(0,0,0,.15),0 1px 2px rgba(0,0,0,.05);-moz-box-shadow:inset 0 2px 4px rgba(0,0,0,.15),0 1px 2px rgba(0,0,0,.05);box-shadow:inset 0 2px 4px rgba(0,0,0,.15),0 1px 2px rgba(0,0,0,.05)}.frosmoBtn{border-color:#c5c5c5;border-color:rgba(0,0,0,0.15) rgba(0,0,0,0.15) rgba(0,0,0,0.25)}.frosmoBtnInfo{color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,0.25);background-color:#49afcd;background-image:-moz-linear-gradient(top,#5bc0de,#2f96b4);background-image:-webkit-gradient(linear,0 0,0 100%,from(#5bc0de),to(#2f96b4));background-image:-webkit-linear-gradient(top,#5bc0de,#2f96b4);background-image:-o-linear-gradient(top,#5bc0de,#2f96b4);background-image:linear-gradient(to bottom,#5bc0de,#2f96b4);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ff5bc0de',endColorstr='#ff2f96b4',GradientType=0);border-color:#2f96b4 #2f96b4 #1f6377;border-color:rgba(0,0,0,0.1) rgba(0,0,0,0.1) rgba(0,0,0,0.25);*background-color:#2f96b4;filter:progid:DXImageTransform.Microsoft.gradient(enabled = false)}.frosmoBtnInfo:hover{color:#fff;background-color:#2f96b4;*background-color:#2a85a0}.frosmo-message-hidden{visibility:hidden!important}",
a.customAction=function(){var d={},c;d.trigger=function(b,d,h){var g=["string","boolean","number"];if("string"!==typeof b)a.api.error("Invalid type for name:"+typeof b,a.ERROR_CUSTOMACTION);else if(a.utils.inArray(g,typeof d))if(b=b.toString(),d=d.toString(),!b||128<b.length)a.api.error("Invalid name:"+b,a.ERROR_CUSTOMACTION);else if(!d||128<d.length)a.api.error("Invalid value:"+d+", name:"+b,a.ERROR_CUSTOMACTION);else{var g=c.segments,l=[],n=c.date||new Date,w=c.states;g&&(a.utils.each(g,function(c,
g){c.name===b&&a.utils.inArray(c.values,d)&&(a.visitsHistory.addCustomAction(g,n),l.push(g))}),0<l.length&&(a.segmentchange.evaluate({customActions:l},n),a.context.save()));a.utils.isArray(w)&&a.utils.inArray(w,b)&&a.states.set(b,d);a.events.trigger(a.EVENT_CUSTOMACTION,b,d);a.events.trigger(a.EVENT_CUSTOMACTION+"."+b,b,d);a.events.trigger(a.EVENT_CUSTOMACTION+"."+b+"."+d,b,d);a.api.sendCustomAction(b,d,h);return 0<l.length}else a.api.error("Invalid type for value:"+typeof d,a.ERROR_CUSTOMACTION)};
d.bind=function(b,c,d){a.events.on(a.EVENT_CUSTOMACTION+"."+b,c,d)};d.init=function(b){c=b;c.rules&&a.customActionRules.init(c.rules)};return d}(),a.customActionRules=function(){var d={},c=function(b){if(x.geo){var c=function(b,c){var d=c.latitude,f=c.longitude;a.utils.each(b.rules,function(c,h){x.geo.getCircleDistance({lat:d,lon:f},{lat:c[0],lon:c[1]})<=parseFloat(c[2])&&a.customAction.trigger(b.name,h)})};a.events.on(a.EVENT_LOCATION,function(a){c(b,a)})}},b=function(a){switch(a.type){case "geolocation":c(a)}};
d.init=function(c){a.utils.each(c,b)};return d}(),function(){a.location=function(){return{getLocation:function(d){var c=a.api.getApiUrl("location"),b=new XMLHttpRequest,f=navigator.userAgent.match(/MSIE 1[0-9]/i),h=window.XDomainRequest?!0:!1,g=function(b){d(b);a.events.trigger(a.EVENT_LOCATION,b)},l=["or",["matchDevice","android"],["matchDevice","ios"],["matchDevice","othermobile"],["matchDevice","windowsphone"]],n={country2:"",latitude:"",longitude:""};if(c)if(a.context.evaluationTime=new Date,
a.evaluator.setContext(a.context),a.evaluator.evaluate(l))a.console.log("do not request location for mobile user"),g(n);else{h&&!f?(b=new window.XDomainRequest,c+="_ie?callback=test&names=country2,latitude,longitude",b.onload=a.addExceptionHandling(function(){g(x.JSON.parse(b.responseText))},{code:a.ERROR_LOCATION})):b.onreadystatechange=a.addExceptionHandling(function(){4===b.readyState&&g({country2:b.getResponseHeader("X-Country2"),latitude:b.getResponseHeader("X-latitude"),longitude:b.getResponseHeader("X-longitude")})},
{code:a.ERROR_LOCATION});try{b.open("GET",c,!0),b.send(null)}catch(w){g(n)}}}}}()}(),function(){a.dataLayer=function(){var d=null,c=null,b=function(b){a.utils.each(b,function(b){w(b);a.events.trigger(a.EVENT_DATALAYER,b)})},f=function(){window.dataLayer.push=function(){var a=[].slice.call(arguments,0);d.apply(window.dataLayer,a);b(a)}},h=function(b){return a.utils.map(b.transactionProducts,function(a){return{conversion_name:a.name,conversion_value:parseFloat(a.price),conversion_id:a.id||a.sku||a.name,
conversion_type:a.category,transaction_id:b.transactionId,conversion_quantity:parseInt(a.quantity,10),payment_channel:b.transactionPaymentType||null}})},g=function(a){return{product_id:a.frosmoProductId,product_name:a.frosmoProductName,product_type:a.frosmoProductCategory,product_price:a.frosmoProductPrice,product_image:a.frosmoProductImage,product_url:a.frosmoProductUrl,product_discount_price:a.frosmoProductDiscountPrice,product_promotion_label:a.frosmoProductPromotionLabel}},l=function(a){return{conversion_id:a.conversionId,
conversion_type:a.conversionType,conversion_value:a.conversionValue,conversion_name:a.frosmoConversionName}},n=function(b){b=h(b);a.utils.each(b,function(b){a.conversions.push(b)});a.conversion.handleConversionArray()},w=function(b){b.transactionProducts&&n(b);b.frosmoProductId&&(a.products.push(g(b)),a.conversion.handleProductArray());b.conversionId&&(a.conversions.push(l(b)),a.conversion.handleConversionArray());b.frosmoEvent&&a.customAction.trigger(String(b.frosmoEvent),String(b.frosmoValue))},
m=function(){if(!window.dataLayer||window.dataLayer!==c)window.dataLayer=c=window.dataLayer||[],d=window.dataLayer.push,b(window.dataLayer),f()};return{init:function(){m();a.setInterval(function(){m()},1E3)},handleItem:w,convertToConversions:h,convertToProduct:g,convertToConversion:l,setHandleItem:function(a){w=a}}}()}(),function(){a.survey=function(){var d=function(){a.console.log("Survey answered, hide survey.");x.easy.popup.hide()},c=function(){x.easy.surveyView.render(function(b){var c={origin:a.config.api.origin,
cookieId:a.uid.get(),method:"answer",gender:b};a.console.log("Survey answer with: "+b);x.request.jsonp(a.api.getApiUrl("survey"),{params:c,on:{success:x.easy.addExceptionHandling(d)}})})},b=function(b){"undefined"===typeof b&&(b=(new Date).getTime());a.store.set("survey",{lastRequest:{time:b}})},f=function(d){b();d.error?a.console.log("Survey error: "+d.error):(a.console.log("Show survey, id: "+d.surveyId),c())},h=function(b){var c=(new Date).getTime(),d;d=(d=a.store.get("survey"))&&d.lastRequest?
d.lastRequest.time:0;var f=a.context.lastVisit.time||c,h=!0===a.DEVEL?1E3:6E4;if(0===a.context.targetgroups.length)return!1;var r;r=a.config.survey&&"undefined"!==typeof a.config.survey.enabled?a.config.survey.enabled:!0;if(!r)return!1;a:{var u,e,s,k,q;if(!a.config.survey||!a.config.survey.allowedPages||0===a.config.survey.allowedPages.length)b=!0;else{b=a.utils.getLocationFromUrl(b.href);r=a.config.survey.allowedPages;u=0;for(e=r.length;u<e;u+=1)if(s=r[u],k=a.evaluator.getMatcherFunction(s[0]),q=
s[1],s=s[2]||{},a.evaluator.matchUrl(k,q,s,{},b)){b=!0;break a}b=!1}}return!b||18E5>c-d||c-f<h?!1:!0};return{request:function(b){h(b)&&a.domEvents.ready(function(){if(0!==a.context.targetgroups.length){var b={origin:a.config.api.origin,cookieId:a.uid.get(),method:"request",targetGroups:a.context.targetgroups.join("|")};x.request.jsonp(a.api.getApiUrl("survey"),{params:b,on:{success:x.easy.addExceptionHandling(f)}})}})},saveLastRequestTime:b,clearLastRequestTime:function(){b(0)}}}()}(),function(){a.surveyView=
function(){var d={en:{frosmoSurveyTitle:"In order to help us improve our service we would be grateful if you could tell us if you are:",frosmoSurveyMale:"male",frosmoSurveyFemale:"female",frosmoSurveyDecline:"rather not tell"},fi:{frosmoSurveyTitle:"Haluamme parantaa palveluamme ja olisimme kiitollisia jos voisit kertoa meille oletko:",frosmoSurveyMale:"Mies",frosmoSurveyFemale:"Nainen",frosmoSurveyDecline:"En halua kertoa"}},c=function(b){a.utils.each(d[b||"fi"],function(a,b){document.getElementById(b).innerHTML=
a})},b=function(b){a.domEvents.preventDefault(b);b=this.getAttribute("data-language");c(b);a.utils.each(this.parentNode.children,function(a){a.className=""});this.className="frosmoSurveyLanguageActive"},f=function(c){var d=document.getElementById("frosmoSurveyLanguages"),f=document.getElementById("frosmoSurveyGenders");a.utils.each(d.children,function(a){a.onclick=b});a.utils.each(f.children,function(b){b.onclick=function(b){a.domEvents.preventDefault(b);b=this.getAttribute("data-gender");c.call(this,
b)}})};return{render:function(a){x.easy.popup.show('<div id="frosmoSurvey"><div id="frosmoSurveyLanguages"><a href="#" class="frosmoSurveyLanguageActive" data-language="fi">fi</a><a href="#" data-language="en">en</a></div><h2 id="frosmoSurveyTitle"></h2><div id="frosmoSurveyGenders"><button id="frosmoSurveyMale" class="frosmoBtn" type="button" data-gender="male"></button><button id="frosmoSurveyFemale" class="frosmoBtn" type="button" data-gender="female"></button><button id="frosmoSurveyDecline" class="frosmoBtn" type="button" data-gender="decline"></button></div></div>');
f(a);c()}}}()}(),function(){a.user=function(){return{login:function(d){a.context.loginId=d;a.context.save();a.api.login(d,a.context.referer.host);a.states.set("loginStatus","authenticated");a.events.trigger(a.EVENT_LOGIN);return!0},logout:function(){a.context.loginId=null;a.context.save();a.states.set("loginStatus","unauthenticated");a.events.trigger(a.EVENT_LOGOUT);return!0},getLoginId:function(){return a.context.loginId},init:function(){a.user.getLoginId()?a.states.set("loginStatus","authenticated"):
a.states.set("loginStatus","unauthenticated")}}}()}(),a.googleAnalytics=function(){var d;return{init:function(c){d=c;if(!d.trackingId)return!1;d.trackDisplays&&a.googleAnalytics.trackEvent(a.EVENT_MESSAGE_SHOW,d.eventActionDisplay,!0);d.trackTrueDisplays&&a.googleAnalytics.trackEvent(a.EVENT_MESSAGE_TRUE_DISPLAY,d.eventActionTrueDisplay,!0);d.trackClicks&&a.googleAnalytics.trackEvent(a.EVENT_MESSAGE_CLICK,d.eventActionClick,!1);return!0},trackEvent:function(c,b,d){a.events.on(c,function(c){a.googleAnalytics.canSendEvent(c)&&
a.googleAnalytics.sendEvent(c,b,d)})},canSendEvent:function(a){return"undefined"===typeof a.gaTracking?!0:a.gaTracking},sendEvent:function(c,b,d){a.utils.waitFor(100,5E3,function(){var h=!1;window.ga&&(window.ga(function(){a.googleAnalytics.sendUniversalEvent(c,b,d)}),h=!0);window._gaq&&(window._gaq.push(function(){a.googleAnalytics.sendClassicEvent(c,b,d)}),h=!0);return h})},sendClassicEvent:function(c,b,f){var h=a.googleAnalytics.getClassicTracker();if(h){var g=d.eventCategory;c=a.googleAnalytics.getEventLabel(c);
h._trackEvent(g,b,c,0,f)}},getClassicTracker:function(){if(window._gat)for(var a=window._gat._getTrackers(),b=a.length;b--;)if(a[b]._getAccount()===d.trackingId)return a[b]},sendUniversalEvent:function(c,b,f){var h=a.googleAnalytics.getUniversalTracker();if(h){var g=d.eventCategory;c=a.googleAnalytics.getEventLabel(c);h.send("event",g,b,c,0,{nonInteraction:f})}},getUniversalTracker:function(){for(var a=window.ga.getAll(),b=a.length;b--;)if(a[b].get("trackingId")===d.trackingId)return a[b]},getEventLabel:function(a){var b=
"#"+a.id+"."+(999===a.revision?"CG":a.revision);a.title&&(b+=" "+a.title);return b}}}(),function(a){function c(a,b){var c=(a&65535)+(b&65535);return(a>>16)+(b>>16)+(c>>16)<<16|c&65535}function b(a,b,d,f,g,h){a=c(c(b,a),c(f,h));return c(a<<g|a>>>32-g,d)}function f(a,c,d,f,g,h,l){return b(c&d|~c&f,a,c,g,h,l)}function h(a,c,d,f,g,h,l){return b(c&f|d&~f,a,c,g,h,l)}function g(a,c,d,f,g,h,l){return b(d^(c|~f),a,c,g,h,l)}function l(a,d){a[d>>5]|=128<<d%32;a[(d+64>>>9<<4)+14]=d;var k,l,n,r,u,p=1732584193,
t=-271733879,m=-1732584194,v=271733878;for(k=0;k<a.length;k+=16)l=p,n=t,r=m,u=v,p=f(p,t,m,v,a[k],7,-680876936),v=f(v,p,t,m,a[k+1],12,-389564586),m=f(m,v,p,t,a[k+2],17,606105819),t=f(t,m,v,p,a[k+3],22,-1044525330),p=f(p,t,m,v,a[k+4],7,-176418897),v=f(v,p,t,m,a[k+5],12,1200080426),m=f(m,v,p,t,a[k+6],17,-1473231341),t=f(t,m,v,p,a[k+7],22,-45705983),p=f(p,t,m,v,a[k+8],7,1770035416),v=f(v,p,t,m,a[k+9],12,-1958414417),m=f(m,v,p,t,a[k+10],17,-42063),t=f(t,m,v,p,a[k+11],22,-1990404162),p=f(p,t,m,v,a[k+12],
7,1804603682),v=f(v,p,t,m,a[k+13],12,-40341101),m=f(m,v,p,t,a[k+14],17,-1502002290),t=f(t,m,v,p,a[k+15],22,1236535329),p=h(p,t,m,v,a[k+1],5,-165796510),v=h(v,p,t,m,a[k+6],9,-1069501632),m=h(m,v,p,t,a[k+11],14,643717713),t=h(t,m,v,p,a[k],20,-373897302),p=h(p,t,m,v,a[k+5],5,-701558691),v=h(v,p,t,m,a[k+10],9,38016083),m=h(m,v,p,t,a[k+15],14,-660478335),t=h(t,m,v,p,a[k+4],20,-405537848),p=h(p,t,m,v,a[k+9],5,568446438),v=h(v,p,t,m,a[k+14],9,-1019803690),m=h(m,v,p,t,a[k+3],14,-187363961),t=h(t,m,v,p,a[k+
8],20,1163531501),p=h(p,t,m,v,a[k+13],5,-1444681467),v=h(v,p,t,m,a[k+2],9,-51403784),m=h(m,v,p,t,a[k+7],14,1735328473),t=h(t,m,v,p,a[k+12],20,-1926607734),p=b(t^m^v,p,t,a[k+5],4,-378558),v=b(p^t^m,v,p,a[k+8],11,-2022574463),m=b(v^p^t,m,v,a[k+11],16,1839030562),t=b(m^v^p,t,m,a[k+14],23,-35309556),p=b(t^m^v,p,t,a[k+1],4,-1530992060),v=b(p^t^m,v,p,a[k+4],11,1272893353),m=b(v^p^t,m,v,a[k+7],16,-155497632),t=b(m^v^p,t,m,a[k+10],23,-1094730640),p=b(t^m^v,p,t,a[k+13],4,681279174),v=b(p^t^m,v,p,a[k],11,-358537222),
m=b(v^p^t,m,v,a[k+3],16,-722521979),t=b(m^v^p,t,m,a[k+6],23,76029189),p=b(t^m^v,p,t,a[k+9],4,-640364487),v=b(p^t^m,v,p,a[k+12],11,-421815835),m=b(v^p^t,m,v,a[k+15],16,530742520),t=b(m^v^p,t,m,a[k+2],23,-995338651),p=g(p,t,m,v,a[k],6,-198630844),v=g(v,p,t,m,a[k+7],10,1126891415),m=g(m,v,p,t,a[k+14],15,-1416354905),t=g(t,m,v,p,a[k+5],21,-57434055),p=g(p,t,m,v,a[k+12],6,1700485571),v=g(v,p,t,m,a[k+3],10,-1894986606),m=g(m,v,p,t,a[k+10],15,-1051523),t=g(t,m,v,p,a[k+1],21,-2054922799),p=g(p,t,m,v,a[k+
8],6,1873313359),v=g(v,p,t,m,a[k+15],10,-30611744),m=g(m,v,p,t,a[k+6],15,-1560198380),t=g(t,m,v,p,a[k+13],21,1309151649),p=g(p,t,m,v,a[k+4],6,-145523070),v=g(v,p,t,m,a[k+11],10,-1120210379),m=g(m,v,p,t,a[k+2],15,718787259),t=g(t,m,v,p,a[k+9],21,-343485551),p=c(p,l),t=c(t,n),m=c(m,r),v=c(v,u);return[p,t,m,v]}function n(a){var b,c="";for(b=0;b<32*a.length;b+=8)c+=String.fromCharCode(a[b>>5]>>>b%32&255);return c}function w(a){var b,c=[];c[(a.length>>2)-1]=void 0;for(b=0;b<c.length;b+=1)c[b]=0;for(b=
0;b<8*a.length;b+=8)c[b>>5]|=(a.charCodeAt(b/8)&255)<<b%32;return c}function m(a){return n(l(w(a),8*a.length))}function r(a,b){var c,d=w(a),f=[],g=[];f[15]=g[15]=void 0;16<d.length&&(d=l(d,8*a.length));for(c=0;16>c;c+=1)f[c]=d[c]^909522486,g[c]=d[c]^1549556828;c=l(f.concat(w(b)),512+8*b.length);return n(l(g.concat(c),640))}function u(a){var b="",c,d;for(d=0;d<a.length;d+=1)c=a.charCodeAt(d),b+="0123456789abcdef".charAt(c>>>4&15)+"0123456789abcdef".charAt(c&15);return b}a.md5=function(a,b,c){return!b?
!c?u(m(unescape(encodeURIComponent(a)))):m(unescape(encodeURIComponent(a))):!c?u(r(unescape(encodeURIComponent(b)),unescape(encodeURIComponent(a)))):r(unescape(encodeURIComponent(b)),unescape(encodeURIComponent(a)))}}(a),a.quickContext=function(){function d(){a.events.once(a.EVENT_INIT_UID,function(a){u.UID=a;h()});a.events.once(a.EVENT_INIT_CONTEXT,function(a){u.segments=n(a.segments);h()});a.events.on(a.EVENT_SEGMENT_ENTER,function(a){1===m[a]&&(u.segments[a]=1,h())});a.events.on(a.EVENT_SEGMENT_LEAVE,
function(a){u.segments[a]&&(delete u.segments[a],h())});a.events.on(a.EVENT_MESSAGE_SHOW,function(b){l(b.id,a.utils.getTimestamp())&&h()})}function c(){return a.utils.clone(u)}function b(c){var d=[],f;a.utils.each(c,function(c){a.utils.isArray(c)?d=d.concat(b(c)):(f=c.match(/sgmt_\d*/))&&(d=d.concat(f))});return d}function f(c){a.utils.each(c,function(c){a.utils.each(b(c.segmentRules),function(a){m[a]=1})})}function h(){var b=c();a.utils.isEmpty(b.segments)?delete b.segments:b.segments=a.utils.map(a.utils.keys(b.segments),
function(a){return parseInt(a.replace(/sgmt_/,""),10)});a.utils.isEmpty(b.lastDisplayTime)&&delete b.lastDisplayTime;b=x.JSON.stringify(b);a.cookies.set(a.COOKIE_QUICK_CONTEXT,b,365)}function g(b){a.utils.each(b,function(a,b){l(b,a)})}function l(b,c){b=parseInt(b,10);if(-1===a.utils.indexOf(r,b))return!1;u.lastDisplayTime[b]=c;return!0}function n(b){var c={};a.utils.each(a.utils.keys(m),function(a){b.hasOwnProperty(a)&&(c[a]=1)});return c}function w(b){var c={};a.utils.each(b.segments,function(a){c["sgmt_"+
a]=1});b.segments=c;return b}var m={},r=[],u={UID:null,segments:{},lastDisplayTime:{},VERSION:"1.1.0"};return{init:function(b,c){for(var k=0,l=b.length;k<l;k+=1)for(var m=k+1;m<l;m+=1)b[k].displayElement===b[m].displayElement&&b[k].triggerId===b[m].triggerId&&(r.push(b[k].id),r.push(b[m].id));f(b);if(k=x.JSON.parse(a.cookies.get(a.COOKIE_QUICK_CONTEXT))){switch(k.VERSION){case "1.1.0":k=w(k)}u.UID=k.UID;u.segments=n(k.segments);g(k.lastDisplayTime)}null===u.UID&&(k=a.uid.newUid(c),u.UID=k);h();d()},
get:c,getLastDisplayTime:function(a){return u.lastDisplayTime[a]},_getSegmentsFromRules:b}}(),a.quickMessage=function(){function d(b){a.utils.each(c(b),function(a){n(a)})}function c(a){a=l(a);a=b(a);g(a);return a}function b(b){var c=[],d,g=f(b);a.utils.each(g,function(a,b){g[b]=h(a)});for(d in g)g.hasOwnProperty(d)&&c.push(g[d]);return c}function f(b){var c={};a.utils.each(b,function(a){c[a.displayElement]||(c[a.displayElement]=[]);c[a.displayElement].push(a)});return c}function h(b){return a.utils.reduce(b,
function(b,c){var d,f;if(b){if(b.priority<c.priority)return c;if(b.priority>c.priority)return b;d=a.quickContext.getLastDisplayTime(b.id)||0;f=a.quickContext.getLastDisplayTime(c.id)||0;return d<=f?b:c}return c})}function g(a){a.sort(function(a,b){return+(a.priority<b.priority)||+(a.priority===b.priority)-1})}function l(b){var c=a.quickContext.get();return a.utils.filter(m,function(d){return a.quickMessageEvaluator.evaluate(d,b,c)})}function n(b,c){var d=a.quickMessage.getPositionData(b);a.domElements.waitForElement({selector:d.getElementSelector(),
success:function(b){a.console.log("easy.quickMessage: elements exist",b);a.messageShow.showMessage([d],c)},failure:function(){a.console.log("easy.quickMessage: elements NOT FOUND")}})}function w(b){return 0.1>parseInt(a.md5(b).substr(0,8),16)/Math.pow(2,32)}var m;return{init:function(b,c){a.quickContext.init(b,c);m=b;a.events.on(a.EVENT_TRIGGER_FIRE,d)},showMessage:n,uniqByDisplayElement:b,sortByHighestPriority:g,getPositionData:function(b){var c=new a.positionData(null,null,b.displayElement,b.displayMethod,
b.customRenderer);if(b.comparisonGroup&&w(a.quickContext.get().UID))b={id:b.id,options:{displayDelay:0,maxDisplayTimes:0},revision:999,revisionType:"hidden",content:null,gaTracking:b.gaTracking};else{var d={id:b.id,options:{displayDelay:0,maxDisplayTimes:0},revision:1,revisionType:"html",content:b.content,gaTracking:b.gaTracking};b.template&&(d.template=b.template);b=d}c.message=b;return c},isUidInComparisonGroup:w,getPrioritizedMessage:h}}(),a.quickMessageEvaluator=function(){function d(a,b){return new Date(a.startTime)<=
b&&(!a.endTime?!0:b<=new Date(a.endTime))}function c(b,c){return a.utils.inArray(b,a.quickMessageEvaluator.getDecilForUid(c))}function b(b,c){var d=new a.baseEvaluator;d.setEvaluatorValue("segments",c);return d.evaluate(b)}return{evaluate:function(a,h,g){var l=new Date;return a.triggerId===h.id&&d(a,l)&&c(a.decils,g.UID)&&b(a.segmentRules,g.segments)},evaluateTrigger:function(a,b){return a===b},evaluateTime:d,evaluateDecils:c,getDecilForUid:function(b){b=parseInt(a.md5(b+"randomized decil").substr(0,
8),16)/Math.pow(2,32);return 1+parseInt(10*b,10)},evaluateSegments:b}}(),function(){a.pageLoad=function(){var d=a.addExceptionHandling(function(a,b){return/#lightbox/.test(a)||/#lightbox/.test(b)?!1:!0});return{isValidUrlChange:d,enableUrlChangedEvent:function(){var c=window.history,b=document.location.href,f=function(){var c=document.location.href;b!==c&&(d(c,b)&&a.events.trigger(a.EVENT_URL_CHANGED,c),b=c)};window.addEventListener?(window.addEventListener("hashchange",f,!1),window.addEventListener("popstate",
f,!1)):window.attachEvent&&(window.attachEvent("onhashchange",f),window.attachEvent("onpopstate",f));if(c.pushState){var h=c.pushState;c.pushState=function(f,l,n){if("function"===typeof c.onpushstate)c.onpushstate({state:f});d(n,b)&&a.events.trigger(a.EVENT_URL_CHANGED,n);return h.apply(c,arguments)}}}}}()}(),function(){a.contextApi=function(){var d=function(b){a.api.error("easy.contextApi.request::",a.ERROR_CONTEXTAPI);"function"===typeof b&&a.addExceptionHandling(b)()},c=function(b,c,h,g,l){var n=
new XMLHttpRequest;n.open(b,c,!0);n.onload=function(b){if(200<=n.status&&400>n.status){if("function"===typeof h){var c;try{c=x.JSON.parse(n.responseText)}catch(f){}a.addExceptionHandling(h)(c)}}else d(g)};n.onerror=function(b,c,f){a.api.error("easy.contextApi.request::",a.ERROR_CONTEXTAPI);d(g)};n.send(x.JSON.stringify(l))};return{get:function(b,d,h){b=a.api.getCallUrl("contextApi",{method:"get",key:b});c("GET",b,d,h)},set:function(b,d,h,g){b=a.api.getCallUrl("contextApi",{method:"set",key:b});c("POST",
b,h,g,d)}}}()}(),function(){var d=window._frosmo||{},c;"function"===typeof d.initFunction&&!d.initialized&&(a.addExceptionHandling(d.initFunction)(),d.initialized=!0);d.base&&d.origin&&(c=a.loadScript("//"+d.base+"sites/"+d.origin+".js",function(){}),a.main.onInitSuccess(function(){c&&(c.removeAttribute("src"),c.parentNode?c.parentNode.removeChild(c):a.console.error("customerScript does not have parentNode"),c=null)}))}(),a.namespaceLoaded=!0)})();
