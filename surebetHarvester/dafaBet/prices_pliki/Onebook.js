var Onebook=Onebook||{};Onebook.Namespace=function(t){var e,n=t.split("."),r=Onebook;for("Onebook"===n[0]&&(n=n.slice(1)),e=0;e<n.length;e+=1)"undefined"==typeof r[n[e]]&&(r[n[e]]={}),r=r[n[e]];return r},Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,r=function(){},o=function(){return n.apply(this instanceof r&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,o.prototype=new r,o}),function(t){var e=function(t,e,n){var r;for(r in e)r in t&&(!n||t.hasOwnProperty(r))||(t[r]=e[r]);return t},n=function(t,n){var r,o;if("function"!=typeof t){if("function"!=typeof n)return r=t.__proto__,e(t,r),e(t,n),t;throw"object can't inherit from function"}return r=t.prototype,o=function(){"use strict";var a,i,u=function(t,e){var n,r;return n=Array.prototype.slice.call(e,0),n.unshift(t),new(r=t.bind.apply(t,n))},s=function(){if(void 0!==a)return a;throw a=u(n,arguments)},c=function(e){return e===o||e===t||e===n?!0:this.base().instanceOf?this.base().instanceOf(e):!1},d=[],f=function(t){d.push(t.base),t.base=s},h=function(t){var e=d.pop(t.base);void 0===e?delete t.base:t.base=e};"function"!=typeof n&&(a=n),f(t.prototype);try{i=u(t,arguments)}catch(l){if(l!==a)throw l;f(a),t.prototype=a,i=u(t,arguments),t.prototype=r,h(a),void 0===i.__proto__&&(i.__inherit_proto__=a),i=e(i,r,!0)}if(void 0===a)throw"ChildClass must call ParentClass's constructor 'this.base()'";return h(t.prototype),a=s=void 0,i.base=function(){return this.__proto__||this.__inherit_proto__},i.instanceOf=c,i}};t.inherit=n}(Onebook),Onebook.Namespace("Identity"),function(t,e){var n={IsUltron:!0,SelectedOddsType:"1",TimeZone:(new Date).getTimezoneOffset(),DebugMode:0,SkinRootPath:"template/fun88/",OddsTypeList:[{value:"1",text:"DEC"},{value:"2",text:"HK"},{value:"4",text:"MY"},{value:"5",text:"US"}],CalBettype:[],ByGrpupType:0,Month:["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"],RefreshCnt:function(t){return"l"==t.FixtureType?5:"Match"==t.Scope?5:10}};Onebook.Identity=e.extend(Onebook.Identity,n)}(window,jQuery),function(t){"use strict";function e(){function r(t){var e={},n={},r=function(n,r){e[n]=(e[n]||0)+1,c(t,n,r)},o=function(e,n,r){d(e,{sender:t,data:n},r)},a=function(t,e){return f(t,e)?(n[t]=e,!0):!1},i=function(t,e,n){return h(t,e,n)},u=function(e,r){var o;return e?(o=l(t,e,r),void 0!==r&&o===r?r:!n.hasOwnProperty(e)||void 0!==r&&n[e]!==r?o:(o=n[e],l(t,e,o),delete n[e],o)):void 0},s=function(){var r;for(r in n)l(t,r,n[r]);for(r in e)l(t,r);e={},n={}};this.id=function(){return t},this.id=t,this.ask=i,this.answer=a,this.send=o,this.receive=r,this.remove=u,this.clear=s}if(this===t)return new e;var o=this,a={},i={},u={},s={},c=function(t,e,n){var r={id:t,cb:n};void 0===a[e]&&(a[e]=[],i[e]={}),void 0===i[e][t]&&(i[e][t]=[]),a[e].push(r),i[e][t].push(r)},d=function(t,e,r){var o,i,u=a[t];if(void 0!==u)for(o=u.length,i=0;o>i;i++)n(u[i].cb,[e])},f=function(t,e){if(void 0===u[t]){if(u[t]=e,void 0!==s[t]){var r,o=s[t],a=o.length;for(s[t]=void 0,r=0;a>r;r++)n(e,o[r])}return!0}return!1},h=function(t,e,r){var o,a=[],i=u[t];if(o=arguments.length,a=Array.prototype.slice.call(arguments,1),void 0!==i){if("function"!=typeof a[o-2])return i(a);n(i,a)}else{if("function"!=typeof a[o-2])return void 0;void 0===s[t]&&(s[t]=[]),s[t].push(a)}},l=function(t,e,n){var r,o,s,c,d;if(s=u[e],void 0===s){if(s=a[e],void 0!==s&&(c=i[e][t],c&&0!==c.length)){for(r=c.length-1;r>=0;r--)if(d=c[r],void 0===n||d.cb===n){if(o=s.indexOf(d),o>=0&&(s.splice(o,1),0===s.length))return delete a[e],delete i[e],d.cb;if(void 0!==n)return c.splice(r,1),0===c.length&&delete i[e][t],n}return void 0===n?(delete i[e][t],c[c.length-1].cb):void 0}}else if(void 0===n||s===n)return delete u[e],s},p=function(t){return t?(delete u[t],delete a[t],void delete i[t]):(u={},a={},void(i={}))},v={},g=function(t){t=t||"#default_client#";var e=v[t];return void 0===e&&(e=new r(t),v[t]=e),e},y=function(t,e){var n,r;n=t?a[t]:a,r=t&&e?i[t]?i[t][e]:void 0:i};return o.version="0.8.0",o.getClient=g,o.check=y,o.clear=p,o}var n=function(t,e){return setTimeout(function(){t.apply(null,e)},1)},r=new e;return e.version=r.version,e.getClient=r.getClient,e.clear=r.clear,t.MessageController=e,e}(window);var Onebook=Onebook||{};!function(t,e){"function"==typeof define&&define.amd?define(e):t.Onebook.Util=e()}(this,function(){"use strict";var t=Onebook.Identity,e={},n=Object.prototype.toString,r=Array.prototype,o=Array.isArray||function(t){n.call(t)===n.call([])},a=function(t){return"function"==typeof t},i=r.sort,u=r.push,s=function(t){var e,n,r,a,i,s,c,d=0,f=this.length-1,h=this.CompareFn,l=0;if(0!==arguments.length&&0!==this.length){if(arguments.length>1?(t=[],u.apply(t,arguments)):o(t)||(t=[t]),c=t.length,!h){for(n=0;c>n;n++)for(r=t[n],a=this.length,d=0;a>d;d++)this[d]===r&&(this.splice(d,1),l++,d=a);return l===c}for(t.sort(h),s=h(this[this.length-1],t[c-1]),n=c-1;n>=0;n--){r=t[n],d=0,i=h(this[0],r);do d===f?a=i:d+1===f?0>=s?(d=f,a=i=s):(f=d,a=s=i):(e=Math.floor((d+f)/2),a=h(this[e],r),0>=a?(d=e,i=a):(f=e,s=a));while(f>d);if(0===a)for(e=d;e>=0&&0===a;)this[e]===r?(a=-1,this.splice(e,1),l++):e>d&&(e--,a=h(this[e],r))}return l===c}},c=function(t){var e,n,r,a,i,s,c,d=0,f=this.length-1,h=this.CompareFn;if(0!==arguments.length){if(arguments.length>1?(t=[],u.apply(t,arguments)):o(t)||(t=[t]),h&&t.sort(h),-1===f||!h)return void u.apply(this,t);for(c=t.length,i=h(this[0],t[0]),n=0;c>n;n++){r=t[n],f=this.length-1,s=h(this[this.length-1],r);do d===f?a=i:d+1===f?0>s?(d=f,a=i=s):(f=d,a=i):(e=Math.floor((d+f)/2),a=h(this[e],r),0>a?(d=e,i=a):(f=e,s=a));while(f>d);this.splice(0>=a?d+1:d,0,r)}}},d=function(t,e){var n=[];return o(t)?u.apply(n,t):(e=t,t=void 0),a(e)&&(n.CompareFn=e),n.remove=s,n.add=c,n.sort=function(){arguments.length>0?i.apply(n,arguments):n.CompareFn&&i.call(n,n.CompareFn)},n.length>0&&n.sort(),n},f=function(t,e){var n,r;if(o(t))for(r=t.length,n=0;r>n;n++)e.apply(t,[t[n],n]);else for(n in t)t.hasOwnProperty(n)&&e.apply(t,[t[n],n])},h=function(t,e){var n,r,a,i=0,u=[];if(o(t))for(r=t.length,n=0;r>n;n++)a=e.apply(t,[t[n],n,i]),void 0!==a&&(u.push(a),i++);else for(n in t)t.hasOwnProperty(n)&&(a=e.apply(t,[t[n],n,i]),void 0!==a&&(u.push(a),i++));return u},l=function(t){var e,n,r;if(o(t))for(e=[],r=t.length,n=0;r>n;n++)e.push(t[n]);else{e={};for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}return e},p=function(t,e){var n=function(t){var e=t;return 0>e&&(e=-1/e,e=Math.floor(100*e)/100),e},r=function(t){var e=t;return 0==e?0:(e=n(e)+1,e=parseInt(100*e+.5,10)/100)},o=function(t){var e=t;if(0==e)return 0;var n=parseInt(1/Math.abs(e)*100,10)/100;return e=e>0?-n:n},a=function(t){var e=t;if(0==e)return 0;var n=parseInt(1/Math.abs(e)*100,10);return e=e>0?-n:n},i=t;switch(e){case"1":i=r(i);break;case"2":i=n(i);break;case"3":i=o(i);break;case"5":i=a(i)}return i},v=function(e){var n=new Date(e);return n.setHours(e.getHours()+t.TimeZone),n},g=function(t){var e=new Date(t);return e.setHours(-4),e},y=function(t){var e=g(t);return new Date(e.getFullYear(),e.getMonth(),e.getDate())},m=function(e){return t.Month[e.getMonth()]+" "+e.getDate()+(e.getFullYear()!=(new Date).getFullYear()?", "+e.getFullYear():"")};return d.prototype=r,e={isArray:o,isFunction:a,List:d,clone:l,each:f,map:h,ConvertOdds:p,ConvertSiteTime:v,toShortDate:m,UTC2ServerTime:g,UTC2ServerDate:y}}),function(t,e){"function"==typeof define&&define.amd?define(["jquery","MessageController","Util"],e):t.OddsManager=e(t.jQuery,t.MessageController,t.Onebook.Util)}(this,function(t,e,n){"use strict";var r={lang:"en",SportType:"1",FixtureType:"d"},o=e.getClient("oddsManager"),a=n.each,i=n.List,u=n.UTC2ServerDate,s=n.isArray,c=n.isFunction,d=0,f=function(){return d+=1},h=null,l=new i,p={},v={},g={},y=[],m=[],M=function(t,e){return t.LeagueId!==e.LeagueId?t.LeagueId-e.LeagueId:t.MatchCode!==e.MatchCode?t.MatchCode>e.MatchCode?1:-1:t.MatchId-e.MatchId},b=function(t,e){return t.MaxBet!==e.MaxBet?e.MaxBet-t.MaxBet:t.OddsId-e.OddsId},w=function(){var t={},e={};y=[],m=[],a(p,function(n,r){a(n.matches,function(n,r){var o=u(n.ShowTimeUTC),i=o.getMonth()+"-"+o.getDate();t.hasOwnProperty(i)||(t[i]=o,y.push(t[i])),a(n.oddset,function(t){var n=t.Bettype;e.hasOwnProperty("b"+n)||(e["b"+n]=n,m.push(n))})})}),y.sort(function(t,e){return t-e}),m.sort()},O=function(e,n){var r=p[e.LeagueId];r||(r=p[e.LeagueId]={matches:new i(M)},l.add(r)),t.extend(r,e),r.tstamp=n},I=function(t,e){var n=p[t];n&&(delete p[t],l.remove(n),n.tstamp=e,a(n.matches,function(t){T(t.MatchId,e)}))},C=function(e,r){var o,a=v[e.MatchId],u=!1;if(e.ShowTime&&(e.ShowTimeUTC=e.ShowTime,e.ShowTime=n.ConvertSiteTime(e.ShowTimeUTC)),void 0!==e.MatchCode&&(e.MatchCode=e.MatchCode.toUpperCase()),a){if(o=p[a.LeagueId],!o)return;u=a.MatchCode!==e.MatchCode&&void 0!==e.MatchCode,t.extend(a,e),u&&o.matches.sort()}else{if(o=p[e.LeagueId],!o)return;a=v[e.MatchId]=t.extend({oddset:new i(b)},e),o.matches.add(a)}o.tstamp=a.tstamp=r},T=function(t,e){var n,r=v[t];r&&(delete v[t],r.tstamp=e,a(r.oddset,function(t){S(t.OddsId,e)}),n=p[r.LeagueId],n&&(n.tstamp=e,n.matches.remove(r),0===n.matches.length&&I(n.LeagueId,e)))},L=function(e,n){var r,o,a=g[e.OddsId],i=!1;if(a){if(r=v[a.MatchId],o=p[a.LeagueId],!r||!o){var u="Update Market fail";return r||(u=u+", Match['"+a.MatchId+"'] not found"),void(o||(u=u+", League['"+a.LeagueId+"'] not found"))}void 0!==e.MaxBet&&a.MaxBet!==e.MaxBet&&(i=!0),t.extend(a,e),i&&r.oddset.sort()}else{if(r=v[e.MatchId],!r)return;a=g[e.OddsId]={},t.extend(a,e),r.oddset.add(a),o=p[r.LeagueId]}o.tstamp=r.tstamp=a.tstamp=n},S=function(t,e){var n,r,o=g[t];o&&(o.tstamp=e,delete g[t],n=v[o.MatchId],r=p[o.LeagueId],n&&(n.tstamp=e,n.oddset.remove(o),0===n.oddset.length&&T(n.MatchId,e)),r&&(r.tstamp=e))},U={UL:O,DL:I,UM:C,DM:T,UK:L,DK:S},_=[],x=function(t){a(t.leagues,function(t){var e=t.matches;delete t.matches,_.push({act:"UL",data:t}),a(e,function(e){var n=e.oddset;e.LeagueId=t.LeagueId,e.SportType=t.SportType,delete e.oddset,_.push({act:"UM",data:e}),a(n,function(n){var r=n.sels;n.sels={},a(r,function(t){n.sels[t.Key]=t}),n.MatchId=e.MatchId,n.MatchCode=e.MatchCode,n.LeagueId=t.LeagueId,_.push({act:"UK",data:n})})})}),a(t.UpdateMatches,function(t){_.push({act:"UM",data:t})}),a(t.UpdateOddset,function(t){var e=t.sels;t.sels={},a(e,function(e){t.sels[e.Key]=e}),_.push({act:"UK",data:t})}),a(t.DelMatches,function(t){_.push({act:"DM",data:t})}),a(t.DelOddset,function(t){_.push({act:"DK",data:t})})},k=function(t){var e,n=_?_.length||0:0,r=f();0!==n&&(t||(t=n),t>n&&(t=n),e=_.splice(0,t),a(e,function(t){U[t.act](t.data,r)}))},D=function(t,e,n,r){var o,a,i,u=e.length,c={},d="string"==typeof t?h[t]:t;if(!d)return e;if(d&&!s(d)&&(d=d["s"+n]||d["b"+r]||d["default"]),0===e.length)return[];if(s(e[0])&&!h.hasOwnProperty(d[0])&&e[0].length===d.length){for(c=[],o=0;u>o;o++)c.push(D(d,e[o],n,r));return c}for(o=0;u>o;o++)a=d[o],i=e[o],"SportType"===a&&(n=i),"Bettype"===a&&(r=i),c[a||"*p"+o]=s(i)?D(a,i,n,r):i;return c},F=null,A=function(t){l=new i,p={},v={},g={},r=t,r.tstamp=0},B=function(e,n){if(F){var a=F;F=null,a.abort()}e&&(c(e)?(n=e,e=null):A(e)),F=t.ajax({url:"/EuroSite/match_data.ashx",data:r,dataType:"jsonp",jsonp:"jsoncallback",success:function(t){var e=D("Fixture",t,r.SportType||1);F=null,x(e),k(),w(),e.tstamp&&(r.tstamp=e.tstamp),o.send("odds.update",{FullOdds:l,DateList:y,BetTypeList:m})},error:function(t,e,n){("abort"!==e||t===F)&&(F=null,o.send("odds.update",null))}})},P=function(t){var e,n,r,o,a;h=t;for(e in h)if("string"!=typeof h[e][0]&&(r=h[e],h[e]={},n=r[0].hasOwnProperty("s")?"s":r[0].hasOwnProperty("b")?"b":!1,n&&s(r[0][n])))for(o=0;o<r.length;o++)for(a=0;a<r[o][n].length;a++)0===r[o][n][a]?h[e]["default"]=r[o][e]:h[e][n+r[o][n][a]]=r[o][e],1!==r[o][n][a]||h[e]["default"]||(h[e]["default"]=r[o][e])},j=function(){t.ajax({url:"/EuroSite/Match_data_Schema.ashx",data:{},dataType:"jsonp",jsonp:"jsoncallback",success:function(t){P(t)},error:function(t,e,n,r){}})};return o.receive("TimeZone.change",function(){w(),o.send("odds.update",{FullOdds:l,DateList:y,BetTypeList:m})}),j(),{query:B}});